(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{240:function(t,a,i){},283:function(t,a,i){"use strict";var n=i(240);i.n(n).a},341:function(t,a,i){"use strict";i.r(a);var n=i(51),e=i.n(n),s=i(72),c=i.n(s),o=i(12),r=i.n(o),u=i(227),d=i(50),v=i(3),h=i(229),l=i(226),p=i(71),I=i(228),m={mixins:[u.a],data:function(){return{MOBILE_HOST:"//zhike1.vhall.com/m/",activity:{viewCondition:"",status:"",startTime:"",countDown:"",extChannel:""},user:{phone:"",isApplay:!1,isOrder:!1},vhallParams:{token:"",appId:"",channelId:"",accountId:""},visitorObj:{}}},mounted:function(){},components:{},created:function(){this.getInfo()},computed:Object(d.c)("tokenMager",{chatParams:function(t){return t.chatParams}}),watch:{},methods:r()({},Object(d.b)("tokenMager",{setChatParams:v.b}),{accountSubmit:function(){this.doAuth(this.MOBILE_HOST+"watch/"+this.$route.params.id)},initSdk:function(){this.initMsgServe()},initMsgServe:function(){var t=this;return c()(e.a.mark(function a(){var i;return e.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$config({handlers:!0}).$post(p.a.GET_VISITOR_INFO,{}).then(function(a){t.visitorObj.visitorId=a.data});case 2:if(t.extChannel){a.next=4;break}return a.abrupt("return",!1);case 4:return a.next=6,t.$config({handlers:!0}).$post(l.a.GET_REG_SDK_INFO,{thirdUserId:"visitor_"+t.visitorObj.visitorId,channel:t.extChannel}).then(function(t){return t.data});case 6:i=a.sent,I.a.OBJ.init({accountId:i.accountId,token:i.token,appId:i.appId,channelId:i.channelRoom}),I.a.OBJ.regHandler(h.a.beginLive,function(a){console.log(a),t.doAuth(t.MOBILE_HOST+"watch/"+t.$route.params.id)});case 9:case"end":return a.stop()}},a,t)}))()},handleActivityStart:function(t){this.activity.countDown=1799},getInfo:function(){var t=this;return c()(e.a.mark(function a(){return e.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$config({handlers:!0}).$get(l.a.GET_LIVEINFO,{activityId:t.$route.params.id}).then(function(a){t.activity.viewCondition=a.data.activity.viewCondition,t.activity.status=a.data.activity.status,t.activity.startTime=a.data.activity.startTime,t.activity.countDown=a.data.activity.countDown,t.user.isApplay=a.data.joinInfo.isApplay,t.user.isOrder=a.data.joinInfo.isOrder,t.extChannel=a.data.activity.extChannelRoom,("LIVING"===t.activity.status||t.activity.countDown<=1799)&&!a.data.viewLimit.canAppoint&&("APPOINT"===t.activity.viewCondition?a.data.joinInfo.isApplay&&t.doAuth(t.MOBILE_HOST+"watch/"+t.$route.params.id):a.data.joinInfo.isOrder&&"NONE"===t.activity.viewCondition&&t.doAuth(t.MOBILE_HOST+"watch/"+t.$route.params.id))});case 2:t.getToken();case 3:case"end":return a.stop()}},a,t)}))()},getToken:function(){var t=this;("APPOINT"===this.activity.viewCondition&&this.user.isApplay||"APPOINT"!==this.activity.viewCondition)&&(this.chatParams.token?(this.vhallParams=this.chatParams,this.$nextTick(function(){t.initSdk()})):this.$config({handlers:!0}).$get(p.a.GET_USERREGACTIVITY,{activityId:this.$route.params.id}).then(function(a){t.$config({handlers:!0}).$get(l.a.GET_SDKTOKEN,{activityId:t.$route.params.id,activityUserId:a.data.activityUserId}).then(function(a){t.vhallParams.token=a.data.token,t.vhallParams.appId=a.data.appId,t.vhallParams.channelId=a.data.channelRoom,t.vhallParams.accountId=a.data.accountId,t.setChatParams(t.vhallParams),t.$nextTick(function(){t.initSdk()})})}))}})},f=(i(283),i(1)),y=Object(f.a)(m,function(){var t=this,a=t.$createElement,n=t._self._c||a;return t.activity.countDown<1800||"LIVING"===t.activity.status?n("div",{staticClass:"v-success"},[n("img",{staticClass:"v-img",attrs:{src:i(239),alt:""}}),t._v(" "),t._m(0),t._v(" "),n("button",{staticClass:"primary-button",on:{click:t.accountSubmit}},[t._v("进入直播")])]):n("div",{staticClass:"v-success"},[n("img",{staticClass:"v-img",attrs:{src:i(239),alt:""}}),t._v(" "),n("p",{staticClass:"v-success-title"},["APPOINT"===t.activity.viewCondition?n("span",[t._v("报名成功")]):"NONE"===t.activity.viewCondition?n("span",[t._v("预约成功")]):t._e()]),t._v(" "),n("p",[t._v("活动将于\n    "),n("span",{staticClass:"v-red"},[t._v(t._s(t.activity.startTime))]),t._v("准时开播")])])},[function(){var t=this.$createElement,a=this._self._c||t;return a("p",{staticClass:"v-start-title"},[a("span",[this._v("直播将要开始啦")])])}],!1,null,"0ccd1e92",null);y.options.__file="success.vue";a.default=y.exports}}]);