(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{166:function(e,t,s){},167:function(e,t,s){},175:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"v-vercode"},[s("div",{attrs:{id:"captcha"}}),e._v(" "),s("div",{staticClass:"v-input-from"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text"},domProps:{value:e.code},on:{blur:e.pushCode,input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),s("a",{staticClass:"v-getcode",class:{prohibit:e.isProhibit},attrs:{href:"javascript:;"},on:{click:function(t){e.getCode()}}},[e._v("获取动态码"),s("span",{directives:[{name:"show",rawName:"v-show",value:e.isSend,expression:"isSend"}],staticClass:"v-getcode-span"},[e._v("("),s("em",[e._v(e._s(e.second))]),e._v("s)")])])])])};i._withStripped=!0;var o=s(72),n=s.n(o),a=s(40),r=s.n(a),c=s(163),h=s.n(c),d=s(164),l=s.n(d),p=s(68),m=s(69);const u={timeout:1e4,responseType:"json",withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}};h.a.interceptors.request.use(e=>(e.params.__loading&&Object(p.a)(!0),"post"===e.method&&(e.data=l.a.stringify(e.params),delete e.params),e),e=>(Object(p.a)(!1),r.a.reject(e))),h.a.interceptors.response.use(e=>(Object(p.a)(!1),200!==e.data.code?r.a.reject(e.data.msg):e),e=>r.a.reject(e));var v=e=>{e.url=e.abPath||"//t-api-class.e.vhall.com"+e.url;let t=n()({},u,e);return console.log(t),h()(t).then(e=>e.data).catch(e=>(Object(p.a)(!1),console.log("出错了",e),Object(m.a)({header:"提示",content:e}),new r.a(()=>{})))};var g={getCodeId:e=>v({method:"post",url:"/common/message/get-captchaid",params:e}),getCode:e=>v({method:"post",url:"/common/message/send-code",params:e})},f={props:{phone:String,isGetCode:Boolean},data:()=>({key:"",isProhibit:!0,isSend:!1,second:60,timerr:"",phoneKey:"",isImg:!1,cap:null,code:""}),mounted(){},components:{},created(){g.getCodeId({}).then(e=>{if(200!==e.code)console.log(e.msg);else{let t=this;this.key=e.data,window.initNECaptcha({captchaId:t.key,element:"#captcha",mode:"float",width:"100%",onReady:function(e){},onVerify:function(e,s){s&&(t.phoneKey=s.validate,t.isImg=!0),e&&console.log(e)},onError:function(){}},function(e){t.cap=e})}})},watch:{isImg:function(e){this.isGetCodePermission()},isGetCode:function(){this.isGetCode&&(clearInterval(this.timerr),this.isSend=!1,this.isProhibit=!0,this.second=60,this.isImg=!1,this.phoneKey="",this.cap.refresh())}},methods:{getCode(){if(this.isProhibit)return!1;let e={mobile:this.phone,type:"BUSINESS_USER_LOGIN",captcha:this.phoneKey};g.getCode(e).then(e=>{200!==e.code?(clearInterval(this.timerr),this.isSend=!1,this.isProhibit=!0,this.second=60,this.isImg=!1,this.phoneKey="",this.cap.refresh()):(this.isSend=!0,this.isProhibit=!0,clearInterval(this.timerr),this.timerr=setInterval(()=>{this.second--,this.second<=0&&(clearInterval(this.timerr),this.isSend=!1,this.isProhibit=!0,this.second=60,this.isImg=!1,this.phoneKey="",this.cap.refresh())},1e3))})},isGetCodePermission(){this.isImg?this.isProhibit=!1:this.isProhibit=!0},pushCode(){this.$emit("inputFocus",this.code)}}},b=(s(182),s(1)),_=Object(b.a)(f,i,[],!1,null,"15c0d488",null);_.options.__file="src/components/common/signup/com-code.vue";t.a=_.exports},176:function(e,t,s){"use strict";var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-form"},[t("label",{staticClass:"v-label"},[this._v("\n    "+this._s(this.label)+"\n  ")]),this._v(" "),t("input",{staticClass:"v-input",attrs:{type:"text",placeholder:this.placeholder},domProps:{value:this.inputVal}})])};i._withStripped=!0;var o={props:{label:String,inputVal:String,placeholder:String},data:()=>({}),mounted(){},components:{},created(){},watch:{},methods:{}},n=(s(180),s(1)),a=Object(n.a)(o,i,[],!1,null,"5a5e988b",null);a.options.__file="src/components/common/signup/com-input.vue";t.a=a.exports},180:function(e,t,s){"use strict";var i=s(166);s.n(i).a},182:function(e,t,s){"use strict";var i=s(167);s.n(i).a}}]);
//# sourceMappingURL=common.7af11849.js.map