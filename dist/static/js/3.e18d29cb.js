(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{146:function(t,e,n){},147:function(t,e,n){},148:function(t,e,n){},149:function(t,e,n){},150:function(t,e,n){},151:function(t,e,n){},152:function(t,e,n){},153:function(t,e,n){},154:function(t,e,n){},155:function(t,e,n){},158:function(t,e,n){},159:function(t,e,n){},160:function(t,e,n){},161:function(t,e,n){},173:function(t,e,n){"use strict";var i=n(146);n.n(i).a},175:function(t,e,n){"use strict";var i=n(147);n.n(i).a},177:function(t,e,n){"use strict";var i=n(148);n.n(i).a},179:function(t,e,n){"use strict";var i=n(149);n.n(i).a},181:function(t,e,n){"use strict";var i=n(150);n.n(i).a},183:function(t,e,n){"use strict";var i=n(151);n.n(i).a},185:function(t,e,n){"use strict";var i=n(152);n.n(i).a},187:function(t,e,n){"use strict";var i=n(153);n.n(i).a},189:function(t,e,n){"use strict";var i=n(154);n.n(i).a},191:function(t,e,n){"use strict";var i=n(155);n.n(i).a},197:function(t,e,n){"use strict";var i=n(158);n.n(i).a},199:function(t,e,n){t.exports=n.p+"static/img/user.png"},200:function(t,e,n){t.exports=n.p+"static/img/default.png"},201:function(t,e,n){"use strict";var i=n(159);n.n(i).a},203:function(t,e,n){"use strict";var i=n(160);n.n(i).a},205:function(t,e,n){"use strict";var i=n(161);n.n(i).a},209:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"head"},[n("mt-header",{staticClass:"is-fixed",attrs:{title:t.headTitle}},[n("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[t.isHeadClose?t._e():n("mt-button",{staticClass:"iconfont icon-back"}),t._v(" "),t.isHeadClose?n("mt-button",{staticClass:"iconfont icon-close",on:{click:t.handleClose}}):t._e()],1),t._v(" "),"购物车"!==t.headTitle||t.isCartMange?t._e():n("mt-button",{staticClass:"cart-manger",attrs:{slot:"right"},on:{click:t.cartManferClick},slot:"right"},[t._v("管理")]),t._v(" "),"购物车"===t.headTitle&&t.isCartMange?n("mt-button",{staticClass:"cart-manger",attrs:{slot:"right"},on:{click:t.cartManferClick},slot:"right"},[t._v("完成")]):t._e(),t._v(" "),"购物车"!==t.headTitle?n("mt-button",{attrs:{slot:"right",icon:"more"},slot:"right"}):t._e()],1)],1),t._v(" "),n("keep-alive",{attrs:{include:"Kind,Home"}},[n(t.currentTabComponent,{tag:"component",attrs:{isCartMange:t.isCartMange},on:{kindClick:function(e){t.changMenu("Kind")},saveUserInfo:function(e){t.changMenu("My")}}})],1),t._v(" "),"联系卖家"!==this.headTitle?n("div",{staticClass:"bottom-nav"},[n("mt-tabbar",{staticClass:"is-fixed",model:{value:t.selected=t.bottomActive,callback:function(e){t.selected=t.bottomActive=e},expression:"selected = bottomActive"}},[n("mt-tab-item",{attrs:{id:"Home"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="Home"}}},[n("i",{staticClass:"iconfont icon-shouye",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        首页\n      ")]),t._v(" "),n("mt-tab-item",{attrs:{id:"Kind"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="Kind"}}},[n("i",{staticClass:"iconfont icon-leimupinleifenleileibie",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        分类\n      ")]),t._v(" "),n("mt-tab-item",{attrs:{id:"Cart"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="Cart"}}},[n("i",{staticClass:"iconfont icon-gouwuche",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        购物车\n      ")]),t._v(" "),n("mt-tab-item",{attrs:{id:"Record"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="Record"}}},[n("i",{staticClass:"iconfont icon-goumaijilu",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        订单\n      ")]),t._v(" "),n("mt-tab-item",{attrs:{id:"My"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="My"}}},[n("i",{staticClass:"iconfont icon-gerenzhongxin",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        个人中心\n      ")])],1)],1):t._e()],1)};i._withStripped=!0;var o=n(208),s=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"coupon"},[e("CouponCard")],1)};s._withStripped=!0;var a=function(){var t=this.$createElement;this._self._c;return this._m(0)};a._withStripped=!0;var c={name:"coupon-card",props:{coupon:{default:null,type:Object}}},r=(n(173),n(37)),l=Object(r.a)(c,a,[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"coupon-card"},[n("div",{staticClass:"stamp stamp01"},[n("div",{staticClass:"par"},[n("p",[t._v("XXXXXX折扣店")]),n("sub",{staticClass:"sign"},[t._v("￥")]),n("span",[t._v("50.00")]),n("sub",[t._v("优惠券")]),n("p",[t._v("订单满100.00元")])]),t._v(" "),n("div",{staticClass:"copy"},[t._v("副券"),n("p",[t._v("2015-08-13"),n("br"),t._v("2016-08-13")])]),t._v(" "),n("i")])])}],!1,null,"5ae52212",null);l.options.__file="src/components/coupon-card.vue";var d={name:"coupon",components:{CouponCard:l.exports}},u=(n(175),Object(r.a)(d,s,[],!1,null,"0c108982",null));u.options.__file="src/pages/home/coupon.vue";var f=u.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"record"},[n("div",{staticClass:"head"},[n("button",{on:{click:function(e){t.orderKindClick("pay")}}},[n("i",{staticClass:"iconfont icon-daifukuan"}),n("span",[t._v("待付款")])]),t._v(" "),n("button",{on:{click:function(e){t.orderKindClick("send")}}},[n("i",{staticClass:"iconfont icon-daifahuo"}),n("span",[t._v("待发货")])]),t._v(" "),n("button",{on:{click:function(e){t.orderKindClick("receive")}}},[n("i",{staticClass:"iconfont icon-daishouhuo"}),n("span",[t._v("待收货")])]),t._v(" "),n("button",{on:{click:function(e){t.orderKindClick("accomplish")}}},[n("i",{staticClass:"iconfont icon-quanbudingdan"}),n("span",[t._v("已完成")])])]),t._v(" "),n("div",{staticClass:"content"},[n("div",{ref:"pay",staticClass:"order pay"},[n("div",{staticClass:"title"},[t._v("待付款("+t._s(t.payOrder.length)+")")]),t._v(" "),t._l(t.payOrder,function(e){return n("div",{staticClass:"good-info-box"},[n("goodInfo",{attrs:{goodInfo:e},on:{cancelOrder:function(n){t.cancelOrder(e.id)}}})],1)})],2),t._v(" "),n("div",{ref:"send",staticClass:"order send"},[n("div",{staticClass:"title"},[t._v("待发货("+t._s(t.sendOrder.length)+")")]),t._v(" "),t._l(t.sendOrder,function(t){return n("div",{staticClass:"good-info-box"},[n("goodInfo",{attrs:{goodInfo:t}})],1)})],2),t._v(" "),n("div",{ref:"receive",staticClass:"order receive"},[n("div",{staticClass:"title"},[t._v("待收货("+t._s(t.receiveOrder.length)+")")]),t._v(" "),t._l(t.receiveOrder,function(t){return n("div",{staticClass:"good-info-box"},[n("goodInfo",{attrs:{goodInfo:t}})],1)})],2),t._v(" "),n("div",{ref:"accomplish",staticClass:"order accomplish"},[n("div",{staticClass:"title"},[t._v("完成订单("+t._s(t.allOtherOrder.length)+")")]),t._v(" "),t._l(t.allOtherOrder,function(t){return n("div",{staticClass:"good-info-box"},[n("goodInfo",{attrs:{goodInfo:t}})],1)})],2)])])};h._withStripped=!0;var v="api/orders/info",m="api/orders/delete",p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"good-info"},[n("div",{staticClass:"cart-top"},[t.isCartShow?n("input",{attrs:{type:"checkbox",name:"goods"},domProps:{checked:t.goodInfo.isChecked},on:{click:function(e){t.clickSelected()}}}):t._e(),t._v(" "),n("img",{staticClass:"good-img",attrs:{src:t.goodInfo.imgUrl,alt:""},on:{click:function(e){t.goodDetail()}}}),t._v(" "),n("div",{staticClass:"good-des",on:{click:function(e){t.goodDetail()}}},[n("p",{staticClass:"good-name"},[t._v(t._s(t.goodInfo.name))]),t._v(" "),n("div",{staticClass:"price-box clearfix"},[0!==t.goodInfo.disprice&&t.goodInfo.disprice?n("span",{staticClass:"price"},[t._v("¥"+t._s(t.goodInfo.disprice))]):n("span",{staticClass:"price"},[t._v("¥"+t._s(t.goodInfo.price))]),t._v(" "),t.goodInfo.disprice?n("span",{staticClass:"del-price del-line"},[t._v("¥"+t._s(t.goodInfo.price))]):t._e(),t._v(" "),t.isCartShow?n("div",{staticClass:"clearfix choose-btn fr",staticStyle:{display:"inline-block"},on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"choose-amount"},[n("button",{staticClass:"minus",attrs:{disabled:t.goodInfo.number<=1},on:{click:t.minusNumberClick}},[t._v("-")]),n("input",{attrs:{type:"number"},domProps:{value:t.goodInfo.number}}),n("button",{staticClass:"add",on:{click:t.addNumberClick}},[t._v("+")])])]):t.isNumberShow?n("div",{staticClass:"fr info"},[n("span",[t._v("共"+t._s(t.goodInfo.number)+"商品")]),t._v(" "),t.goodInfo.disprice?n("span",[t._v("合计¥"+t._s((parseFloat(t.goodInfo.number)*parseFloat(t.goodInfo.disprice)).toFixed(1)))]):n("span",[t._v("合计 ¥"+t._s((parseFloat(t.goodInfo.number)*parseFloat(t.goodInfo.price)).toFixed(1)))])]):n("div",{staticClass:"fr cart"},[n("span",{staticClass:"iconfont icon-cart",on:{click:function(e){return e.stopPropagation(),t.addCart(e)}}})])])])]),t._v(" "),t.isPayShow?n("div",{staticClass:"cart-bottom"},[n("button",{on:{click:t.cancelOrder}},[t._v("取消订单")]),t._v(" "),n("button",[t._v("付款")])]):t._e(),t._v(" "),t.isSendShow?n("div",{staticClass:"cart-bottom"},[n("button",[t._v("提醒发货")]),t._v(" "),n("button",{on:{click:t.cancelSendOrder}},[t._v("取消订单")])]):t._e(),t._v(" "),t.isReceiveShow?n("div",{staticClass:"cart-bottom"},[n("button",[t._v("查看物流")]),t._v(" "),n("button",[t._v("确认收获")])]):t._e()])};p._withStripped=!0;var g=n(140),_={name:"good-info",props:{goodInfo:{},isCartShow:{default:!1,type:Boolean}},data:function(){return{goodsAmount:0,isNumberItemShow:!1,isPayShow:!1,isSendShow:!1,isReceiveShow:!1,isNumberShow:!1,goodsId:0}},methods:{minusNumberClick:function(){this.$emit("minusNumberClick")},addNumberClick:function(){this.$emit("addNumberClick")},clickSelected:function(){this.$emit("clickSelected")},isItemShow:function(){for(var t in this.goodInfo)"isPayed"===t&&(0===this.goodInfo.isPayed?this.isPayShow=!0:0===this.goodInfo.isSend?this.isSendShow=!0:0===this.goodInfo.isReceived&&(this.isReceiveShow=!0)),"number"===t&&(this.isNumberShow=!0)},addCart:function(){this.$emit("addCart")},goodDetail:function(){var t=this;this.goodsId=this.goodInfo.goodId?this.goodInfo.goodId:this.goodInfo.id,g.a.$emit("currentTabComponent","GoodDetail"),setTimeout(function(){g.a.$emit("goodsId",t.goodsId)},0)},cancelOrder:function(){this.$emit("cancelOrder")},cancelSendOrder:function(){this.$emit("cancelSendOrder")}},created:function(){this.isItemShow()},watch:{goodInfo:{handler:function(t,e){console.log(t)},deep:!0},"goodInfo.isClicked":{handler:function(t,e){console.log(t)}}}},C=(n(177),Object(r.a)(_,p,[],!1,null,"07d6acde",null));C.options.__file="src/components/good-info.vue";var b=C.exports,k=n(39),I={name:"index",components:{goodInfo:b},data:function(){return{ordersInfo:[],payOrder:[],sendOrder:[],receiveOrder:[],allOtherOrder:[]}},methods:{queryOrder:function(){var t=this;this.$http.get(v,{params:{userId:1}}).then(function(e){t.ordersInfo=e.data,console.log(t.ordersInfo);for(var n=0;n<t.ordersInfo.length;n++)0===t.ordersInfo[n].status?t.payOrder.push(t.ordersInfo[n]):1===t.ordersInfo[n].status?t.sendOrder.push(t.ordersInfo[n]):2===t.ordersInfo[n].status?t.receiveOrder.push(t.ordersInfo[n]):3===t.ordersInfo[n].status&&t.allOtherOrder.push(t.ordersInfo[n])})},orderKindClick:function(t){var e=void 0;"pay"===t?e=this.$refs.pay.getBoundingClientRect().top:"send"===t?e=this.$refs.send.getBoundingClientRect().top:"receive"===t?e=this.$refs.receive.getBoundingClientRect().top:"accomplish"===t&&(e=this.$refs.accomplish.getBoundingClientRect().top),document.getElementsByClassName("container")[0].scrollTop=e},cancelOrder:function(t){var e=this;Object(k.MessageBox)({title:"",message:"亲，确认取消订单吗？",showCancelButton:!0}).then(function(n){"confirm"===n&&e.$http.get(m,{params:{id:t}}).then(function(t){200===t&&(console.log("删除成功"),e.queryOrder())}),console.log(n)})}},created:function(){this.queryOrder()}},y=(n(179),Object(r.a)(I,h,[],!1,null,"9952c3d0",null));y.options.__file="src/pages/record/index.vue";var w=y.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cart"},[n("span",[t._v("共有"+t._s(t.cartList.length)+"件商品")]),t._v(" "),n("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},t._l(t.cartList,function(e,i){return n("li",[n("goodInfo",{attrs:{goodInfo:e,isCartShow:t.isCartShow},on:{minusNumberClick:function(n){t.minusNumberClick(e.id)},addNumberClick:function(n){t.addNumberClick(e.id)},clickSelected:function(e){t.clickSelected(i)}}})],1)})),t._v(" "),n("div",{staticClass:"cart-bottom clearfix"},[n("div",{staticClass:"fl"},[n("input",{attrs:{type:"checkbox",name:"goods"},domProps:{checked:this.isAllChecked},on:{click:t.allClickSelected}}),t._v(" "),n("span",[t._v("全选")])]),t._v(" "),t.isCartMange?n("div",{staticClass:"fr"},[n("button",{staticClass:"delete-btn",on:{click:t.deleteSelected}},[t._v("删除")])]):n("div",{staticClass:"fr"},[n("span",[t._v("合计："),n("span",[t._v("¥"+t._s(t.cartTotalMoney.toFixed(1)))])]),t._v(" "),n("button",{staticClass:"pay-btn",on:{click:t.payGoods}},[t._v("结算("+t._s(t.selectedNum)+")")])])])])};S._withStripped=!0;var x=n(142),T={name:"index",components:{goodInfo:b},data:function(){return{goodsNum:0,cartList:[],cartTotalMoney:0,isAllChecked:!1,selectedNum:0,isCartShow:!0}},props:{isCartMange:{default:!1,type:Boolean}},methods:{minusNumberClick:function(t){var e=this;this.$http.get(x.a.GET_CART_MINNUM,{params:{id:t}}).then(function(n){if(200===n.status){for(var i=0;i<e.cartList.length;i++)e.cartList[i].id===t&&e.cartList[i].number--;e.totalMoney()}})},addNumberClick:function(t){var e=this;this.$http.get(x.a.GET_CART_ADDNUM,{params:{id:t}}).then(function(n){if(200===n.status){for(var i=0;i<e.cartList.length;i++)e.cartList[i].id===t&&e.cartList[i].number++;e.totalMoney()}})},queryCartList:function(){var t=this;this.$http.get(x.a.GET_CART_INFO,{params:{userId:1}}).then(function(e){if(200===e.status){t.cartList=e.data;for(var n=0;n<t.cartList.length;n++)t.cartList[n].isChecked=!1,console.log(t.cartList[n])}}).catch(function(t){console.log(t)})},loadMore:function(){},totalMoney:function(){this.cartTotalMoney=0,this.selectedNum=0;for(var t=0;t<this.cartList.length;t++)this.cartList[t].isChecked&&(this.cartTotalMoney=this.cartList[t].price*this.cartList[t].number+this.cartTotalMoney,this.selectedNum=this.selectedNum+1)},clickSelected:function(t){this.cartList[t].isChecked=!this.cartList[t].isChecked,this.totalMoney(),this.selectedNum===this.cartList.length?this.isAllChecked=!0:this.isAllChecked=!1},allClickSelected:function(){this.isAllChecked=!this.isAllChecked;for(var t=0;t<this.cartList.length;t++)this.cartList[t].isChecked=this.isAllChecked,this.isAllChecked?this.totalMoney():(this.cartTotalMoney=0,this.selectedNum=0)},deleteSelected:function(){var t=this,e=[];this.cartList.forEach(function(t,n){t.isChecked&&e.push(t.id)}),this.$http.get(x.a.GET_CART_DEL,{params:{ids:e}}).then(function(e){200===e.status&&t.queryCartList()}),console.log(e)},payGoods:function(){console.log("支付商品")}},created:function(){this.queryCartList()},watch:{cartList:{handler:function(t,e){console.log(this.cartList)},deep:!0},"cartList.isClicked":{handler:function(t,e){console.log(t)}}}},M=(n(181),Object(r.a)(T,S,[],!1,null,"72707db2",null));M.options.__file="src/pages/cart/index.vue";var O=M.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user"},[n("div",{staticClass:"top"},[n("div",{staticClass:"edit",on:{click:t.editUserInfo}},[n("i",{staticClass:"iconfont icon-bianji"})]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"nickname"},[n("span",[t._v("昵称：")]),n("span",[t._v(t._s(t.userInfo.nickname))])])]),t._v(" "),n("div",{staticClass:"name-box item"},[n("i",{staticClass:"iconfont icon-username"}),n("span",[t._v("名字：")]),n("span",[t._v(t._s(t.userInfo.name))])]),t._v(" "),n("div",{staticClass:"tel-box item"},[n("i",{staticClass:"iconfont icon-tel"}),n("span",[t._v("手机：")]),n("span",[t._v(t._s(t.userInfo.tel))])]),t._v(" "),n("div",{staticClass:"birth-box item"},[n("i",{staticClass:"iconfont icon-shengrilijin"}),n("span",[t._v("生日：")]),t.userInfo.birth?n("span",[t._v(t._s(t.userInfo.birth.split(" ")[0]))]):n("span",[t._v("设置")])]),t._v(" "),n("div",{staticClass:"address-box item"},[n("i",{staticClass:"iconfont icon-dizhi"}),n("span",[t._v("地址：")]),n("span",[t._v(t._s(t.userInfo.address))])]),t._v(" "),n("div",{staticClass:"connect-box item",on:{click:t.connectBtn}},[n("i",{staticClass:"iconfont icon-lianxi"}),n("span",[t._v("联系卖家")]),n("span")])])};$._withStripped=!0;var E=n(38),N={name:"index",data:function(){return{userInfo:{},currentTabComponent:"",rangeValue:0}},methods:{queryUserInfo:function(){var t=this;this.$http.get(E.a.GET_USER_INFO,{params:{userId:1}}).then(function(e){200===e.status&&(t.userInfo=e.data[0],console.log(t.userInfo))})},editUserInfo:function(){g.a.$emit("currentTabComponent","Edit")},connectBtn:function(){g.a.$emit("currentTabComponent","Chat")}},created:function(){this.queryUserInfo()},watch:{}},D=(n(183),Object(r.a)(N,$,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"aviator"},[e("img",{attrs:{src:"http://b-ssl.duitang.com/uploads/blog/201404/23/20140423205758_FJ4NN.jpeg",alt:""}})])}],!1,null,"4070cfdc",null));D.options.__file="src/pages/user/index.vue";var L=D.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit"},[n("mt-field",{attrs:{label:"姓名",placeholder:"请输入用户名"},model:{value:t.userInfo.name,callback:function(e){t.$set(t.userInfo,"name",e)},expression:"userInfo.name"}}),t._v(" "),n("mt-field",{attrs:{label:"昵称",placeholder:"请输入昵称"},model:{value:t.userInfo.nickname,callback:function(e){t.$set(t.userInfo,"nickname",e)},expression:"userInfo.nickname"}}),t._v(" "),n("mt-field",{attrs:{label:"手机",placeholder:"请输入手机号",type:"tel"},model:{value:t.userInfo.tel,callback:function(e){t.$set(t.userInfo,"tel",e)},expression:"userInfo.tel"}}),t._v(" "),n("mt-field",{attrs:{label:"生日",placeholder:"请输入生日日期",type:"date"},model:{value:t.userInfo.birth,callback:function(e){t.$set(t.userInfo,"birth",e)},expression:"userInfo.birth"}}),t._v(" "),n("mt-field",{attrs:{label:"地址",placeholder:"请输入收货地址",type:"text"},model:{value:t.userInfo.address1,callback:function(e){t.$set(t.userInfo,"address1",e)},expression:"userInfo.address1"}}),t._v(" "),n("div",{staticClass:"save-box"},[n("button",{on:{click:t.saveUserInfo}},[t._v("保存")])])],1)};A._withStripped=!0;var B=n(139),P=n.n(B),K={name:"edit",data:function(){return{userInfo:{},pickerVisible:!0}},methods:{queryUserInfo:function(){var t=this;this.$http.get(E.a.GET_USER_INFO,{params:{userId:1}}).then(function(e){200===e.status&&(t.userInfo=e.data[0],t.userInfo.birth=t.userInfo.birth.split(" ")[0],console.log(t.userInfo))})},saveUserInfo:function(){var t=this;this.$http.get(E.a.GET_USER_UPDATE,{params:P()({},this.userInfo)}).then(function(e){200===e.status&&(g.a.$emit("currentTabComponent","My"),t.$emit("saveUserInfo"))})}},created:function(){this.queryUserInfo()}},G=(n(185),Object(r.a)(K,A,[],!1,null,"fe0f7e0c",null));G.options.__file="src/pages/user/edit.vue";var j=G.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-nav"},[n("mt-tabbar",{staticClass:"is-fixed",model:{value:t.selected=t.active,callback:function(e){t.selected=t.active=e},expression:"selected = active"}},[n("mt-tab-item",{attrs:{id:"home"},nativeOn:{click:function(e){e.preventDefault(),t.active="home"}}},[n("i",{staticClass:"iconfont icon-shouye",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      首页\n    ")]),t._v(" "),n("mt-tab-item",{attrs:{id:"kind"},nativeOn:{click:function(e){e.preventDefault(),t.active="kind"}}},[n("i",{staticClass:"iconfont icon-leimupinleifenleileibie",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      分类\n    ")]),t._v(" "),n("mt-tab-item",{attrs:{id:"cart"},nativeOn:{click:function(e){e.preventDefault(),t.active="cart"}}},[n("i",{staticClass:"iconfont icon-gouwuche",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      购物车\n    ")]),t._v(" "),n("mt-tab-item",{attrs:{id:"record"},nativeOn:{click:function(e){e.preventDefault(),t.active="record"}}},[n("i",{staticClass:"iconfont icon-goumaijilu",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      订单\n    ")]),t._v(" "),n("mt-tab-item",{attrs:{id:"my"},nativeOn:{click:function(e){e.preventDefault(),t.active="my"}}},[n("i",{staticClass:"iconfont icon-gerenzhongxin",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      个人中心\n    ")])],1)],1)};R._withStripped=!0;var U={name:"bottomNav",data:function(){return{active:"home"}},watch:{active:function(t){this.$emit("change",t)}}},F=(n(187),Object(r.a)(U,R,[],!1,null,"7d65d011",null));F.options.__file="src/components/bottom-nav.vue";var H=F.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"head"},[n("mt-header",{staticClass:"is-fixed",attrs:{title:t.headTitle}},[n("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[t.isHeadClose?t._e():n("mt-button",{staticClass:"iconfont icon-back"}),t._v(" "),t.isHeadClose?n("mt-button",{staticClass:"iconfont icon-close",on:{click:t.handleClose}}):t._e()],1),t._v(" "),"购物车"===t.headTitle?n("mt-button",{staticClass:"cart-manger",attrs:{slot:"right"},on:{click:t.cartMangerClick},slot:"right"},[t._v("管理")]):n("mt-button",{attrs:{slot:"right",icon:"more"},slot:"right"})],1)],1)};q._withStripped=!0;var X={name:"head-nav",data:function(){return{}},props:{headTitle:{type:String},isHeadClose:{type:Boolean,default:!0},isCart:{type:Boolean,default:!1}},methods:{handleClose:function(){},cartMangerClick:function(){this.$emit("cartMangerClick")}}},W=(n(189),Object(r.a)(X,q,[],!1,null,"20a8fcc6",null));W.options.__file="src/components/head-nav.vue";var J=W.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"kind"},[n("div",{staticClass:"head"},[n("search")],1),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"kind-list"},[n("ul",[n("li",{class:{active:0===t.index},on:{click:function(e){t.changeKind(0)}}},[t._v("全部")]),t._v(" "),t._l(t.kindList,function(e,i){return n("li",{class:{active:e.id===t.index},on:{click:function(n){t.changeKind(e.id)}}},[t._v(t._s(e.name))])})],2)]),t._v(" "),n("div",{staticClass:"good-list"},t._l(t.goodKindInfo,function(e){return n("div",[n("GoodInfo",{attrs:{goodInfo:e},on:{addCart:function(n){t.addCart(e.id)}}})],1)})),t._v(" "),n("div",{staticClass:"clearfix"})])])};z._withStripped=!0;var Y=n(162),Q=n(163),V=n(141),Z={name:"kind",components:{Search:Y.a,GoodInfo:b},data:function(){return{kindList:[],index:0,goodInfo:[],goodKindInfo:[]}},methods:{changeKind:function(t){if(this.index=t,this.goodKindInfo=[],0===t)this.goodKindInfo=this.goodInfo;else for(var e=0;e<this.goodInfo.length;e++)this.goodInfo[e].kindId===t&&this.goodKindInfo.push(this.goodInfo[e])},queryKind:function(){var t=this;this.$http.get(Q.a.GET_KIND_INFO,{}).then(function(e){200===e.status&&(t.kindList=e.data)})},queryGoodInfo:function(){var t=this;this.$http.get(V.a.GET_GOODS_INFO,{}).then(function(e){200===e.status&&(t.goodInfo=e.data,t.goodKindInfo=t.goodInfo)})},addCart:function(t){this.$http.get(x.a.GET_CART_ADD,{params:{userId:1,goodId:t,number:1}}).then(function(t){200===t.status&&alert(t.data)})}},created:function(){var t=this;this.queryKind(),this.queryGoodInfo(),g.a.$on("kindId",function(e){t.index=e})}},tt=(n(191),Object(r.a)(Z,z,[],!1,null,"425c9bdb",null));tt.options.__file="src/pages/kind/kind.vue";var et=tt.exports,nt=n(207),it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-result"},[n("Search",{attrs:{isSearchPage:!0},on:{search:t.search}}),t._v(" "),n("div",{staticClass:"good-list"},t._l(t.goodInfo,function(e){return n("div",[n("GoodInfo",{attrs:{goodInfo:e},on:{addCart:function(n){t.addCart(e.id)}}})],1)}))],1)};it._withStripped=!0;var ot={name:"goodDetail",components:{Search:Y.a,GoodInfo:b},props:{isSearchPage:{default:!0,type:Boolean}},data:function(){return{goodId:0,goodInfo:[],number:1}},methods:{search:function(t){var e=this;this.$http.get(V.a.GET_GOOD_KEY,{params:{key:t}}).then(function(t){200===t.status&&(e.goodInfo=t.data)})},addCart:function(t){this.$http.get(x.a.GET_CART_ADD,{params:{userId:1,goodId:t,number:1}}).then(function(t){200===t.status&&alert(t.data)})}},mounted:function(){document.getElementsByClassName("searchInput")[0].focus()},created:function(){},watch:{isSearchPage:{handler:function(t,e){},deep:!0}}},st=(n(197),Object(r.a)(ot,it,[],!1,null,"38da8366",null));st.options.__file="src/pages/good/search.vue";var at=st.exports,ct=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"chat"}},[e("ChatList")],1)};ct._withStripped=!0;var rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("section",{staticClass:"chatlist",class:t.showSelBox>0?"chatlist-bottom-collapse":"chatlist-bottom"},[i("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"top-pull-text":"加载更多","top-drop-text":"释放加载"},on:{"top-status-change":t.handleTopChange}},[i("ul",[t._l(t.records,function(e){return[1==e.type?i("li",{staticClass:"chat-mine"},[i("div",{staticClass:"chat-user"},[i("img",{attrs:{src:n(199)}})]),t._v(" "),i("div",{staticClass:"time"},[i("cite",[i("i",[t._v(t._s(e.time))]),t._v(t._s(e.name))])]),t._v(" "),i("div",{staticClass:"chat-text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}})]):t._e(),t._v(" "),2==e.type?i("li",[i("div",{staticClass:"chat-user"},[i("img",{attrs:{src:n(200)}})]),t._v(" "),i("div",{staticClass:"time"},[i("cite",[t._v(t._s(e.name)),i("i",[t._v(t._s(e.time))])])]),t._v(" "),i("div",{staticClass:"chat-text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}})]):t._e()]})],2)])],1),t._v(" "),i("section",{staticClass:"foot"},[i("mt-field",{staticClass:"con",attrs:{id:"txtContent",placeholder:"请输入消息"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),i("span",{staticClass:"btn-face",on:{click:function(e){t.showSelBox=1===t.showSelBox?0:1}}},[i("i",{staticClass:"iconfont icon-smile",attrs:{"aria-hidden":"true"}})]),t._v(" "),i("span",{staticClass:"btn btn-send",on:{click:t.sendMsg}},[t._v("发送")]),t._v(" "),i("section",{staticClass:"selbox",class:t.showSelBox>0?"show":"hide"},[i("section",{directives:[{name:"show",rawName:"v-show",value:1===t.showSelBox,expression:"showSelBox===1"}],staticClass:"face-box"},[i("mt-swipe",{attrs:{auto:0,continuous:!1}},t._l(Math.ceil(t.EXPS.length/18),function(e){return i("mt-swipe-item",t._l(t.getEXP(e,18),function(e,n){return i("li",[i("img",{attrs:{src:"static/emotion/"+e.file,alt:"",data:e.code},on:{click:function(n){t.content+=e.code}}})])}))}))],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.showSelBox,expression:"showSelBox===2"}]},[t._v(t._s(t.selOther))])])],1)])};rt._withStripped=!0;var lt=/([yMdhsm])(\1*)/g;function dt(t,e){e-=(t+"").length;for(var n=0;n<e;n++)t="0"+t;return t}var ut={format:function(t,e){return(e=e||"yyyy-MM-dd").replace(lt,function(e){switch(e.charAt(0)){case"y":return dt(t.getFullYear(),e.length);case"M":return dt(t.getMonth()+1,e.length);case"d":return dt(t.getDate(),e.length);case"w":return t.getDay()+1;case"h":return dt(t.getHours(),e.length);case"m":return dt(t.getMinutes(),e.length);case"s":return dt(t.getSeconds(),e.length)}})},parse:function(t,e){var n=e.match(lt),i=t.match(/(\d)+/g);if(n.length===i.length){for(var o=new Date(1970,0,1),s=0;s<n.length;s++){var a=parseInt(i[s]);switch(n[s].charAt(0)){case"y":o.setFullYear(a);break;case"M":o.setMonth(a-1);break;case"d":o.setDate(a);break;case"h":o.setHours(a);break;case"m":o.setMinutes(a);break;case"s":o.setSeconds(a)}}return o}return null}},ft={name:"chatlist",data:function(){return{showSelBox:0,selFace:"表情",selOther:"其他功能",content:"",topStatus:"",records:[{type:1,time:ut.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"游客",content:"你好！"},{type:2,time:ut.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客户MM",content:'这里是<a target="_blank" href="https://github.com/taylorchen709/vue-chat">源码</a>'}],EXPS:[{file:"100.gif",code:"/::)",title:"微笑",reg:/\/::\)/g},{file:"101.gif",code:"/::~",title:"伤心",reg:/\/::~/g},{file:"102.gif",code:"/::B",title:"美女",reg:/\/::B/g},{file:"103.gif",code:"/::|",title:"发呆",reg:/\/::\|/g},{file:"104.gif",code:"/:8-)",title:"墨镜",reg:/\/:8-\)/g},{file:"105.gif",code:"/::<",title:"哭",reg:/\/::</g},{file:"106.gif",code:"/::$",title:"羞",reg:/\/::\$/g},{file:"107.gif",code:"/::X",title:"哑",reg:/\/::X/g},{file:"108.gif",code:"/::Z",title:"睡",reg:/\/::Z/g},{file:"109.gif",code:"/::'(",title:"哭",reg:/\/::'\(/g},{file:"110.gif",code:"/::-|",title:"囧",reg:/\/::-\|/g},{file:"111.gif",code:"/::@",title:"怒",reg:/\/::@/g},{file:"112.gif",code:"/::P",title:"调皮",reg:/\/::P/g},{file:"113.gif",code:"/::D",title:"笑",reg:/\/::D/g},{file:"114.gif",code:"/::O",title:"惊讶",reg:/\/::O/g},{file:"115.gif",code:"/::(",title:"难过",reg:/\/::\(/g},{file:"116.gif",code:"/::+",title:"酷",reg:/\/::\+/g},{file:"117.gif",code:"/:--b",title:"汗",reg:/\/:--b/g},{file:"118.gif",code:"/::Q",title:"抓狂",reg:/\/::Q/g},{file:"119.gif",code:"/::T",title:"吐",reg:/\/::T/g},{file:"120.gif",code:"/:,@P",title:"笑",reg:/\/:,@P/g},{file:"121.gif",code:"/:,@-D",title:"快乐",reg:/\/:,@-D/g},{file:"122.gif",code:"/::d",title:"奇",reg:/\/::d/g},{file:"123.gif",code:"/:,@o",title:"傲",reg:/\/:,@o/g},{file:"124.gif",code:"/::g",title:"饿",reg:/\/::g/g},{file:"125.gif",code:"/:|-)",title:"累",reg:/\/:\|-\)/g},{file:"126.gif",code:"/::!",title:"吓",reg:/\/::!/g}]}},methods:{getEXP:function(t,e){return this.EXPS.slice((t-1)*e,e*t)},sendMsg:function(){var t=this;if(""!==this.content){var e={type:1,time:ut.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"游客",content:this.content};this.records.push(e),setTimeout(function(){t.records.push({type:2,time:ut.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客服MM",content:"你好！"})},100),this.content="",this.scrollToBottom()}else Object(k.Toast)("请输入消息")},focusTxtContent:function(){document.querySelector("#txtContent input").focus()},scrollToBottom:function(){setTimeout(function(){var t=document.getElementsByClassName("chatlist")[0];t.scrollTop=t.scrollHeight},100)},replaceFace:function(t){for(var e=this.EXPS,n=0;n<e.length;n++)t=t.replace(e[n].reg,'<img src="static/emotion/'+e[n].file+'"  alt="" />');return t},handleTopChange:function(t){this.topStatus=t},loadTop:function(t){var e=this,n=this;setTimeout(function(){var i=document.getElementsByClassName("chatlist")[0],o=i.scrollHeight;n.records.unshift({type:1,time:ut.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"游客",content:"你好！13213"},{type:2,time:ut.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客户MM",content:'这里是<a target="_blank" href="https://github.com/taylorchen709/vue-chat">源码</a>13213'}),setTimeout(function(){var t=i.scrollHeight;i.scrollTop=t-o},100),e.$refs.loadmore.onTopLoaded(t)},1500)},initWebSocket:function(){this.websock=new WebSocket("ws://localhost:2346"),this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose},websocketonopen:function(){console.log("WebSocket连接成功")},websocketonerror:function(t){console.log("WebSocket连接发生错误")},websocketonmessage:function(t){var e=JSON.parse(t.data);console.log(e.value)},websocketsend:function(t){this.websock.send(t)},websocketclose:function(t){console.log("connection closed ("+t.code+")")}},mounted:function(){this.scrollToBottom(),this.focusTxtContent()},created:function(){this.initWebSocket()}},ht=(n(201),Object(r.a)(ft,rt,[],!1,null,"9d5d1d74",null));ht.options.__file="src/components/ChatList.vue";var vt={name:"app",components:{ChatList:ht.exports}},mt=(n(203),Object(r.a)(vt,ct,[],!1,null,"77280f48",null));mt.options.__file="src/pages/user/chat.vue";var pt=mt.exports,gt={components:{Home:o.default,User:L,Record:w,Cart:O,bottomNav:H,headNav:J,Kind:et,GoodDetail:nt.default,Edit:j,SearchPage:at,Chat:pt,Coupon:f},name:"layout",props:{},data:function(){return{currentTabComponent:o.default,headTitle:"商城首页",isHeadClose:!0,isCartMange:!1,bottomActive:"home"}},methods:{changMenu:function(t){"Home"===t?(this.currentTabComponent=o.default,this.headTitle="商城首页"):"My"===t?(this.currentTabComponent=L,this.headTitle="个人中心"):"Record"===t?(this.currentTabComponent=w,this.headTitle="购买记录"):"Cart"===t?(this.currentTabComponent=O,this.headTitle="购物车"):"Kind"===t?(this.currentTabComponent=et,this.headTitle="商品分类"):"GoodDetail"===t?(this.currentTabComponent=nt.default,this.headTitle="商品详情",this.bottomActive=""):"Edit"===t?(this.currentTabComponent=j,this.headTitle="编辑个人信息",this.bottomActive=""):"SearchPage"===t?(this.currentTabComponent=at,this.headTitle="商品搜索",this.bottomActive=""):"Chat"===t?(this.currentTabComponent=pt,this.headTitle="联系卖家",this.bottomActive=""):"Coupon"===t&&(this.currentTabComponent=f,this.headTitle="优惠券",this.bottomActive="")},cartManferClick:function(){this.isCartMange=!this.isCartMange},handleClose:function(){},kindClick:function(){this.bottomActive="Kind",this.changMenu("Kind")},saveUserInfo:function(){this.bottomActive="My",this.changMenu("User")}},created:function(){var t=this;g.a.$on("currentTabComponent",function(e){t.changMenu(e)})},watch:{bottomActive:{handler:function(t,e){this.changMenu(t)}}}},_t=(n(205),Object(r.a)(gt,i,[],!1,null,"bdd7b4a4",null));_t.options.__file="src/pages/layout.vue";e.default=_t.exports}}]);
//# sourceMappingURL=3.e18d29cb.js.map