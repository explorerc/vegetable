(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{154:function(t,e,i){},155:function(t,e,i){},160:function(t,e,i){},161:function(t,e,i){},164:function(t,e,i){},192:function(t,e,i){"use strict";var o=i(154);i.n(o).a},194:function(t,e,i){"use strict";var o=i(155);i.n(o).a},204:function(t,e,i){t.exports=i.p+"static/img/user.png"},205:function(t,e,i){t.exports=i.p+"static/img/default.png"},206:function(t,e,i){"use strict";var o=i(160);i.n(o).a},208:function(t,e,i){"use strict";var o=i(161);i.n(o).a},214:function(t,e,i){"use strict";var o=i(164);i.n(o).a},227:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("router-view"),t._v(" "),"联系卖家"!==this.headTitle?i("div",{staticClass:"bottom-nav"},[i("mt-tabbar",{staticClass:"is-fixed",model:{value:t.selected=t.bottomActive,callback:function(e){t.selected=t.bottomActive=e},expression:"selected = bottomActive"}},[i("mt-tab-item",{attrs:{id:"Home"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="Home"}}},[i("i",{staticClass:"iconfont icon-shouye",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        首页\n      ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"Kind"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="Kind"}}},[i("i",{staticClass:"iconfont icon-leimupinleifenleileibie",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        分类\n      ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"Cart"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="Cart"}}},[i("i",{staticClass:"iconfont icon-gouwuche",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        购物车\n      ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"Record"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="Record"}}},[i("i",{staticClass:"iconfont icon-goumaijilu",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        订单\n      ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"User"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="User"}}},[i("i",{staticClass:"iconfont icon-gerenzhongxin",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        个人中心\n      ")])],1)],1):t._e()],1)};o._withStripped=!0;var n=i(217),s=i(216),c=i(221),a=i(223),r=i(224),l=i(219),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom-nav"},[i("mt-tabbar",{staticClass:"is-fixed",model:{value:t.selected=t.active,callback:function(e){t.selected=t.active=e},expression:"selected = active"}},[i("mt-tab-item",{attrs:{id:"home"},nativeOn:{click:function(e){e.preventDefault(),t.active="home"}}},[i("i",{staticClass:"iconfont icon-shouye",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      首页\n    ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"kind"},nativeOn:{click:function(e){e.preventDefault(),t.active="kind"}}},[i("i",{staticClass:"iconfont icon-leimupinleifenleileibie",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      分类\n    ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"cart"},nativeOn:{click:function(e){e.preventDefault(),t.active="cart"}}},[i("i",{staticClass:"iconfont icon-gouwuche",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      购物车\n    ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"record"},nativeOn:{click:function(e){e.preventDefault(),t.active="record"}}},[i("i",{staticClass:"iconfont icon-goumaijilu",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      订单\n    ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"my"},nativeOn:{click:function(e){e.preventDefault(),t.active="my"}}},[i("i",{staticClass:"iconfont icon-gerenzhongxin",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      个人中心\n    ")])],1)],1)};u._withStripped=!0;var f={name:"bottomNav",data:function(){return{active:"home"}},watch:{active:function(t){this.$emit("change",t)}}},h=(i(192),i(37)),d=Object(h.a)(f,u,[],!1,null,"7d65d011",null);d.options.__file="src/components/bottom-nav.vue";var m=d.exports,g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"head"},[i("mt-header",{staticClass:"is-fixed",attrs:{title:t.headTitle}},[i("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[t.isHeadClose?t._e():i("mt-button",{staticClass:"iconfont icon-back"}),t._v(" "),t.isHeadClose?i("mt-button",{staticClass:"iconfont icon-close",on:{click:t.handleClose}}):t._e()],1),t._v(" "),"购物车"===t.headTitle?i("mt-button",{staticClass:"cart-manger",attrs:{slot:"right"},on:{click:t.cartMangerClick},slot:"right"},[t._v("管理")]):i("mt-button",{attrs:{slot:"right",icon:"more"},slot:"right"})],1)],1)};g._withStripped=!0;var v={name:"head-nav",data:function(){return{}},props:{headTitle:{type:String},isHeadClose:{type:Boolean,default:!0},isCart:{type:Boolean,default:!1}},methods:{handleClose:function(){},cartMangerClick:function(){this.$emit("cartMangerClick")}}},p=(i(194),Object(h.a)(v,g,[],!1,null,"20a8fcc6",null));p.options.__file="src/components/head-nav.vue";var b=p.exports,_=i(222),C=i(139),k=i(226),w=i(220),y=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"chat"}},[e("ChatList")],1)};y._withStripped=!0;var M=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("section",{staticClass:"chatlist",class:t.showSelBox>0?"chatlist-bottom-collapse":"chatlist-bottom"},[o("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"top-pull-text":"加载更多","top-drop-text":"释放加载"},on:{"top-status-change":t.handleTopChange}},[o("ul",[t._l(t.records,function(e){return[1==e.type?o("li",{staticClass:"chat-mine"},[o("div",{staticClass:"chat-user"},[o("img",{attrs:{src:i(204)}})]),t._v(" "),o("div",{staticClass:"time"},[o("cite",[o("i",[t._v(t._s(e.time))]),t._v(t._s(e.name))])]),t._v(" "),o("div",{staticClass:"chat-text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}})]):t._e(),t._v(" "),2==e.type?o("li",[o("div",{staticClass:"chat-user"},[o("img",{attrs:{src:i(205)}})]),t._v(" "),o("div",{staticClass:"time"},[o("cite",[t._v(t._s(e.name)),o("i",[t._v(t._s(e.time))])])]),t._v(" "),o("div",{staticClass:"chat-text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}})]):t._e()]})],2)])],1),t._v(" "),o("section",{staticClass:"foot"},[o("mt-field",{staticClass:"con",attrs:{id:"txtContent",placeholder:"请输入消息"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),o("span",{staticClass:"btn-face",on:{click:function(e){t.showSelBox=1===t.showSelBox?0:1}}},[o("i",{staticClass:"iconfont icon-smile",attrs:{"aria-hidden":"true"}})]),t._v(" "),o("span",{staticClass:"btn btn-send",on:{click:t.sendMsg}},[t._v("发送")]),t._v(" "),o("section",{staticClass:"selbox",class:t.showSelBox>0?"show":"hide"},[o("section",{directives:[{name:"show",rawName:"v-show",value:1===t.showSelBox,expression:"showSelBox===1"}],staticClass:"face-box"},[o("mt-swipe",{attrs:{auto:0,continuous:!1}},t._l(Math.ceil(t.EXPS.length/18),function(e){return o("mt-swipe-item",t._l(t.getEXP(e,18),function(e,i){return o("li",[o("img",{attrs:{src:"static/emotion/"+e.file,alt:"",data:e.code},on:{click:function(i){t.content+=e.code}}})])}))}))],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:2===t.showSelBox,expression:"showSelBox===2"}]},[t._v(t._s(t.selOther))])])],1)])};M._withStripped=!0;var x=/([yMdhsm])(\1*)/g;function S(t,e){e-=(t+"").length;for(var i=0;i<e;i++)t="0"+t;return t}var T={format:function(t,e){return(e=e||"yyyy-MM-dd").replace(x,function(e){switch(e.charAt(0)){case"y":return S(t.getFullYear(),e.length);case"M":return S(t.getMonth()+1,e.length);case"d":return S(t.getDate(),e.length);case"w":return t.getDay()+1;case"h":return S(t.getHours(),e.length);case"m":return S(t.getMinutes(),e.length);case"s":return S(t.getSeconds(),e.length)}})},parse:function(t,e){var i=e.match(x),o=t.match(/(\d)+/g);if(i.length===o.length){for(var n=new Date(1970,0,1),s=0;s<i.length;s++){var c=parseInt(o[s]);switch(i[s].charAt(0)){case"y":n.setFullYear(c);break;case"M":n.setMonth(c-1);break;case"d":n.setDate(c);break;case"h":n.setHours(c);break;case"m":n.setMinutes(c);break;case"s":n.setSeconds(c)}}return n}return null}},D=i(38),A={name:"chatlist",data:function(){return{showSelBox:0,selFace:"表情",selOther:"其他功能",content:"",topStatus:"",records:[{type:1,time:T.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"游客",content:"你好！"},{type:2,time:T.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客户MM",content:'这里是<a target="_blank" href="https://github.com/taylorchen709/vue-chat">源码</a>'}],EXPS:[{file:"100.gif",code:"/::)",title:"微笑",reg:/\/::\)/g},{file:"101.gif",code:"/::~",title:"伤心",reg:/\/::~/g},{file:"102.gif",code:"/::B",title:"美女",reg:/\/::B/g},{file:"103.gif",code:"/::|",title:"发呆",reg:/\/::\|/g},{file:"104.gif",code:"/:8-)",title:"墨镜",reg:/\/:8-\)/g},{file:"105.gif",code:"/::<",title:"哭",reg:/\/::</g},{file:"106.gif",code:"/::$",title:"羞",reg:/\/::\$/g},{file:"107.gif",code:"/::X",title:"哑",reg:/\/::X/g},{file:"108.gif",code:"/::Z",title:"睡",reg:/\/::Z/g},{file:"109.gif",code:"/::'(",title:"哭",reg:/\/::'\(/g},{file:"110.gif",code:"/::-|",title:"囧",reg:/\/::-\|/g},{file:"111.gif",code:"/::@",title:"怒",reg:/\/::@/g},{file:"112.gif",code:"/::P",title:"调皮",reg:/\/::P/g},{file:"113.gif",code:"/::D",title:"笑",reg:/\/::D/g},{file:"114.gif",code:"/::O",title:"惊讶",reg:/\/::O/g},{file:"115.gif",code:"/::(",title:"难过",reg:/\/::\(/g},{file:"116.gif",code:"/::+",title:"酷",reg:/\/::\+/g},{file:"117.gif",code:"/:--b",title:"汗",reg:/\/:--b/g},{file:"118.gif",code:"/::Q",title:"抓狂",reg:/\/::Q/g},{file:"119.gif",code:"/::T",title:"吐",reg:/\/::T/g},{file:"120.gif",code:"/:,@P",title:"笑",reg:/\/:,@P/g},{file:"121.gif",code:"/:,@-D",title:"快乐",reg:/\/:,@-D/g},{file:"122.gif",code:"/::d",title:"奇",reg:/\/::d/g},{file:"123.gif",code:"/:,@o",title:"傲",reg:/\/:,@o/g},{file:"124.gif",code:"/::g",title:"饿",reg:/\/::g/g},{file:"125.gif",code:"/:|-)",title:"累",reg:/\/:\|-\)/g},{file:"126.gif",code:"/::!",title:"吓",reg:/\/::!/g}]}},methods:{getEXP:function(t,e){return this.EXPS.slice((t-1)*e,e*t)},sendMsg:function(){var t=this;if(""!==this.content){var e={type:1,time:T.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"游客",content:this.content};this.records.push(e),setTimeout(function(){t.records.push({type:2,time:T.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客服MM",content:"你好！"})},100),this.content="",this.scrollToBottom()}else Object(D.Toast)("请输入消息")},focusTxtContent:function(){document.querySelector("#txtContent input").focus()},scrollToBottom:function(){setTimeout(function(){var t=document.getElementsByClassName("chatlist")[0];t.scrollTop=t.scrollHeight},100)},replaceFace:function(t){for(var e=this.EXPS,i=0;i<e.length;i++)t=t.replace(e[i].reg,'<img src="static/emotion/'+e[i].file+'"  alt="" />');return t},handleTopChange:function(t){this.topStatus=t},loadTop:function(t){var e=this,i=this;setTimeout(function(){var o=document.getElementsByClassName("chatlist")[0],n=o.scrollHeight;i.records.unshift({type:1,time:T.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"游客",content:"你好！13213"},{type:2,time:T.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客户MM",content:'这里是<a target="_blank" href="https://github.com/taylorchen709/vue-chat">源码</a>13213'}),setTimeout(function(){var t=o.scrollHeight;o.scrollTop=t-n},100),e.$refs.loadmore.onTopLoaded(t)},1500)},initWebSocket:function(){this.websock=new WebSocket("ws://localhost:2346"),this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose},websocketonopen:function(){console.log("WebSocket连接成功")},websocketonerror:function(t){console.log("WebSocket连接发生错误")},websocketonmessage:function(t){var e=JSON.parse(t.data);console.log(e.value)},websocketsend:function(t){this.websock.send(t)},websocketclose:function(t){console.log("connection closed ("+t.code+")")}},mounted:function(){this.scrollToBottom(),this.focusTxtContent()},created:function(){this.initWebSocket()}},$=(i(206),Object(h.a)(A,M,[],!1,null,"9d5d1d74",null));$.options.__file="src/components/ChatList.vue";var O={name:"app",components:{ChatList:$.exports}},B=(i(208),Object(h.a)(O,y,[],!1,null,"77280f48",null));B.options.__file="src/pages/user/chat.vue";var E=B.exports,H=i(225),P=i(218),U=i(142),j={components:{Home:n.default,User:r.default,Record:c.default,Cart:a.default,bottomNav:m,headNav:b,Kind:_.default,GoodDetail:k.default,Edit:l.default,SearchPage:w.default,Chat:E,Coupon:s.default,Pay:H.default,Book:P.default},name:"layout",props:{},data:function(){return{currentTabComponent:n.default,headTitle:"商城首页",isHeadClose:!0,isCartMange:!1,bottomActive:"Home"}},methods:{changMenu:function(t){"Home"===t?(this.bottomActive="Home",this.$router.replace("/home")):"User"===t?(this.bottomActive="User",this.$router.replace("/user")):"Record"===t?(this.headTitle="购买记录",this.$router.replace("/record")):"Cart"===t?(this.bottomActive="Cart",this.$router.replace("/cart")):"Kind"===t?(this.bottomActive="Kind",this.$router.replace("/kind")):"GoodDetail"===t?(this.currentTabComponent=k.default,this.headTitle="商品详情",this.bottomActive=""):"Edit"===t?(this.bottomActive="",this.$router.replace("/edit")):"SearchPage"===t?(this.bottomActive="",this.$router.replace("/search")):"Chat"===t?this.bottomActive="":"Coupon"===t?(this.bottomActive="",this.$router.replace("/coupon")):"Pay"===t?(this.bottomActive="",this.$router.replace("/pay")):"Book"===t&&(this.bottomActive="",this.$router.replace("/book"))},cartManferClick:function(){this.isCartMange=!this.isCartMange},handleClose:function(){},kindClick:function(){this.bottomActive="Kind",this.changMenu("Kind")},saveUserInfo:function(){this.bottomActive="My",this.changMenu("User")},getUserId:function(){this.$get(U.a.GET_USER_ID).then(function(t){t.code})}},created:function(){var t=this;C.a.$on("currentTabComponent",function(e){t.changMenu(e)}),this.getUserId()},watch:{bottomActive:{handler:function(t,e){this.changMenu(t)}}}},N=(i(214),Object(h.a)(j,o,[],!1,null,"bdd7b4a4",null));N.options.__file="src/pages/layout.vue";e.default=N.exports}}]);
//# sourceMappingURL=3.77f8f4cb.js.map