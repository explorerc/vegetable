(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{268:function(e,t,n){},350:function(e,t,n){"use strict";var a=n(268);n.n(a).a},363:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-user-edit"},[n("a",{staticClass:"v-return-userinfo clearfix",attrs:{href:e.MOBILE_HOST+"userinfo"}},[n("i",{staticClass:"iconfont icon-jiantouzuo fl"}),e._v("修改"+e._s(e.title)+"\n  ")]),e._v(" "),n("div",{staticClass:"v-edit"},[n("div",{staticClass:"v-content"},[e.maxLength?n("com-input",{staticClass:"v-input",attrs:{value:e.val,placeholder:e.placeholder,type:"input",isCharacter:e.isCharacter,"max-length":e.maxLength,isDelete:!0},on:{"update:value":function(t){e.val=t}}}):n("com-input",{staticClass:"v-input",attrs:{value:e.val,placeholder:e.placeholder,type:"input",isCharacter:e.isCharacter,isDelete:!0},on:{"update:value":function(t){e.val=t},focus:e.inputFocus}})],1),e._v(" "),n("p",{staticClass:"v-error"},[e.errorTips?n("i",{staticClass:"iconfont icon-Shapex fl"}):e._e(),e._v(e._s(e.errorTips)+"\n    ")]),e._v(" "),n("button",{staticClass:"primary-button",on:{click:e.save}},[e._v("\n      保存\n    ")])])])};a._withStripped=!0;var i=n(17),r=n.n(i),s=n(12),o=n.n(s),c=n(226),l=n(50),u=n(3),h=n(72),f={mixins:[c.a],data:function(){return{MOBILE_HOST:"//test-zhike.vhall.com/m/",title:"",errorTips:"",val:"",type:"",placeholder:"",maxLength:0,isCharacter:"false"}},created:function(){var e=this;this.type=this.$route.params.type,this.getLoginInfo()?(this.storeLoginInfo(this.getLoginInfo()),this.centerInfo.consumerUser.consumerUserId||this.$config({handlers:!0}).$post(h.a.GET_CENTER_INFO,{}).then(function(t){switch(e.storeCenterInfo(t.data),e.type){case"name":e.title="昵称",e.val=e.centerInfo.consumerUser.nickName,e.placeholder="请填写昵称",e.maxLength=14;break;case"email":e.title="邮箱",e.val=e.centerInfo.consumerUser.email,e.placeholder="请填写邮箱",e.isCharacter=!0,e.maxLength=40}}).catch(function(t){e.$messageBox({header:"提示",content:t.msg,confirmText:"确定",handleClick:function(t){"cancel"===t.action?e.$router.replace("/user"):"confirm"===t.action&&e.$router.replace("/user")}})})):location.replace(this.MOBILE_HOST+"user")},computed:o()({},Object(l.c)("login",{centerInfo:function(e){return e.centerInfo},loginInfo:function(e){return e.loginInfo}})),props:{},watch:{},methods:o()({},Object(l.b)("login",{storeCenterInfo:u.b,storeLoginInfo:u.h}),{save:function(){var e=this;if(!this.val){switch(this.type){case"name":this.errorTips="请输入昵称";break;case"email":this.errorTips="请输入邮箱"}return!1}if(!this.verification(this.val,!0,this.type))return this.errorTips=this.title+"格式有误",!1;var t={};switch(this.$route.params.type){case"name":t.nickName=this.val;break;case"email":t.email=this.val}this.$config({handlers:!0}).$post(h.a.POST_CENTER_UPDATE,t).then(function(t){var n=JSON.parse(r()(e.centerInfo)),a=JSON.parse(r()(e.centerInfo));switch(e.$route.params.type){case"name":e.title="昵称",n.nickName=e.val,a.consumerUser.nickName=e.val;break;case"email":e.title="邮箱",n.email=e.val,a.consumerUser.email=e.val}e.storeLoginInfo(n),e.storeCenterInfo(a),e.$router.replace("/userinfo")}).catch(function(t){e.$messageBox({header:"提示",content:t.msg,confirmText:"确定",handleClick:function(e){"cancel"===e.action||e.action}})})},verification:function(e,t,n){return"name"===n?e.gbLength()>=0&&e.gbLength()<=14:"email"!==n||/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(e)},inputBlur:function(){},inputFocus:function(){this.errorTips=""}})},p=(n(350),n(1)),m=Object(p.a)(f,a,[],!1,null,"fe0f7e0c",null);m.options.__file="src/pages/user/edit.vue";t.default=m.exports}}]);
//# sourceMappingURL=15.2a01578d.js.map