(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{237:function(t,i,a){},238:function(t,i,a){},282:function(t,i,a){"use strict";var n=a(237);a.n(n).a},284:function(t,i,a){"use strict";var n=a(238);a.n(n).a},343:function(t,i,a){"use strict";a.r(i);var n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"v-guid"},[a("p",{staticClass:"v-title"},[t._v("\n    "+t._s(t.activity.title)+"\n  ")]),t._v(" "),!t.activity.isCountdown||"NONE"===t.activity.viewCondition&&t.activity.countDown<1800||"Y"!==t.viewLimit.canAppoint?a("div",{staticClass:"v-summary"},[a("div",{domProps:{innerHTML:t._s(t.activity.description)}})]):t._e(),t._v(" "),t.activity.countDown>=1800?a("div",{staticClass:"v-operation"},["APPOINT"===t.activity.viewCondition?["Y"===t.viewLimit.canAppoint?["LIVING"===t.activity.status?[t.activity.isCountdown?a("p",{staticClass:"v-living"},[t._v("\n            直播正在进行中\n          ")]):t._e()]:[t.activity.isCountdown?a("com-countdown",{attrs:{time:t.activity.countDown}}):t._e()],t._v(" "),t.user.isApplay?[a("button",{staticClass:"primary-button v-disabled"},[t._v("已报名")])]:[a("button",{staticClass:"primary-button",on:{click:function(i){t.jumpPage(t.MOBILE_HOST+"SignUp/")}}},[t._v("立即报名")]),t._v(" "),this.user.phone?t._e():a("a",{staticClass:"v-registered",attrs:{href:"javascript:;"},on:{click:function(i){t.jumpPage(t.MOBILE_HOST+"CheckState/")}}},[t._v("已报名")])]]:[t.user.isApplay?[a("button",{staticClass:"primary-button v-disabled"},[t._v("已报名")])]:[this.user.phone?a("button",{staticClass:"primary-button v-disabled"},[t._v("报名已截止")]):a("button",{staticClass:"primary-button",on:{click:function(i){t.jumpPage(t.MOBILE_HOST+"CheckState/")}}},[t._v("报名验证")])]]]:["LIVING"===t.activity.status?[t.activity.isCountdown?a("p",{staticClass:"v-living"},[t._v("\n          直播正在进行中\n        ")]):t._e(),t._v(" "),a("button",{staticClass:"primary-button",on:{click:function(i){t.joinWebinar()}}},[t._v("进入直播")])]:[t.activity.isCountdown?a("com-countdown",{attrs:{time:t.activity.countDown}}):t._e(),t._v(" "),t.user.isOrder?a("button",{staticClass:"primary-button"},[t._v("已预约")]):[a("button",{staticClass:"primary-button",on:{click:function(i){t.jumpPage(t.MOBILE_HOST+"SignUp/")}}},[t._v("预约")]),t._v(" "),this.user.phone?t._e():a("a",{staticClass:"v-registered",attrs:{href:"javascript:;"},on:{click:function(i){t.jumpPage(t.MOBILE_HOST+"CheckState/")}}},[t._v("已预约")])]]]],2):a("div",{staticClass:"v-operation"},["APPOINT"===t.activity.viewCondition?["Y"===t.viewLimit.canAppoint?["LIVING"===t.activity.status?[t.activity.isCountdown?a("p",{staticClass:"v-living"},[t._v("\n            直播正在进行中\n          ")]):t._e()]:[t.activity.isCountdown?a("p",{staticClass:"v-living"},[t._v("\n            直播即将开始\n          ")]):t._e()],t._v(" "),t.user.isApplay?[a("button",{staticClass:"primary-button",on:{click:function(i){t.joinWebinar()}}},[t._v("进入直播")])]:[a("button",{staticClass:"primary-button",on:{click:function(i){t.jumpPage(t.MOBILE_HOST+"SignUp/")}}},[t._v("立即报名")]),t._v(" "),this.user.phone?t._e():a("a",{staticClass:"v-registered",attrs:{href:"javascript:;"},on:{click:function(i){t.jumpPage(t.MOBILE_HOST+"CheckState/")}}},[t._v("已报名")])]]:["LIVING"===t.activity.status?[t.activity.isCountdown?a("p",{staticClass:"v-living"},[t._v("\n            直播正在进行中\n          ")]):t._e()]:[t.activity.isCountdown?a("p",{staticClass:"v-living"},[t._v("\n            直播即将开始\n          ")]):t._e()],t._v(" "),t.user.isApplay?[a("button",{staticClass:"primary-button",on:{click:function(i){t.joinWebinar()}}},[t._v("进入直播")])]:[this.user.phone?a("button",{staticClass:"primary-button v-disabled"},[t._v("报名已截止")]):a("button",{staticClass:"primary-button",on:{click:function(i){t.jumpPage(t.MOBILE_HOST+"CheckState/")}}},[t._v("报名验证")])]]]:["LIVING"===t.activity.status?[t.activity.isCountdown?a("p",{staticClass:"v-living"},[t._v("\n          直播正在进行中\n        ")]):t._e()]:[t.activity.isCountdown?a("p",{staticClass:"v-living"},[t._v("\n          直播即将开始\n        ")]):t._e()],t._v(" "),a("button",{staticClass:"primary-button",on:{click:function(i){t.joinWebinar()}}},[t._v("进入直播")])]],2)])};n._withStripped=!0;var e=a(51),s=a.n(e),o=a(72),c=a.n(o),r=a(12),u=a.n(r),v=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"v-cundown"},[a("span",[t._v(t._s(t.showTime.day))]),t._v("天"),a("span",[t._v(t._s(t.showTime.hour))]),t._v("小时"),a("span",[t._v(t._s(t.showTime.minute))]),t._v("分"),a("span",[t._v(t._s(t.showTime.second))]),t._v("秒\n")])};v._withStripped=!0;var d={props:{time:Number},data:function(){return{showTime:{day:0,hour:0,minute:0,second:0},timer:0}},mounted:function(){},components:{},created:function(){this.countDown(this.time)},watch:{},methods:{fomatDate:function(t){this.showTime.day=t/3600/24>>0,this.showTime.day<9&&(this.showTime.day="0"+this.showTime.day),this.showTime.hour=((t/3600%24>>0)+"").padStart(2,0),this.showTime.minute=((t/60%60>>0)+"").padStart(2,0),this.showTime.second=((t%60>>0)+"").padStart(2,0),1800===t&&(this.$emit("timeOut"),clearInterval(this.timer))},countDown:function(t){var i=this;if(t>0)var a=setInterval(function(n){i.fomatDate(t--),t<0&&clearInterval(a)},1e3);else this.fomatDate(0)}}},l=(a(282),a(1)),p=Object(l.a)(d,v,[],!1,null,"573d783f",null);p.options.__file="src/components/common/countdown/countdown.vue";var h=p.exports,m=a(227),_=a(228),y=a(50),w=a(3),f=a(229),I=a(226),g=a(71),C={mixins:[m.a],data:function(){return{MOBILE_HOST:"//test-zhike.vhall.com/m/",goUrl:"",goRegisteredUrl:"",activity:{viewCondition:"",title:"",description:"",isCountdown:!1,countDown:"",status:"",extChannel:""},user:{phone:"",isApplay:!1,isOrder:!1},viewLimit:{finishTime:"",canAppoint:""},vhallParams:{token:"",appId:"",channelId:"",accountId:""},visitorObj:{}}},mounted:function(){this.getInfo()},components:{"com-countdown":h},created:function(){},computed:Object(y.c)("tokenMager",{chatParams:function(t){return t.chatParams}}),watch:{countDown:function(){console.log(this.activity.countDown)}},methods:u()({},Object(y.b)("tokenMager",{setChatParams:w.b}),{jumpPage:function(t){var i=t+this.$route.params.id;this.doAuth(i)},initSdk:function(){this.initMsgServe()},initMsgServe:function(){var t=this;return c()(s.a.mark(function i(){var a;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.$config({handlers:!0}).$post(g.a.GET_VISITOR_INFO,{}).then(function(i){var a=t.getLoginInfo();_log.set("business_uid",t.activity.userId),a&&_log.set("consumer_uid",a.consumerUserId),_log.set("activity_id",t.$route.params.id),_log.set("visitor_id",i.data.visitorId);var n=t.$route.query.refer;void 0!==n?(localStorage.setItem("refer_"+t.activityId,n),_log.track(Vhall_User_Actions.ENTER,{event:parseInt(n)})):_log.track(Vhall_User_Actions.ENTER),t.visitorObj.visitorId=i.data.visitorId});case 2:if(t.extChannel){i.next=4;break}return i.abrupt("return",!1);case 4:return i.next=6,t.$config({handlers:!0}).$post(I.a.GET_REG_SDK_INFO,{thirdUserId:"visitor_"+t.visitorObj.visitorId,channel:t.extChannel}).then(function(t){return t.data});case 6:a=i.sent,_.a.OBJ.init({accountId:a.accountId,token:a.token,appId:a.appId,channelId:a.channelRoom}),_.a.OBJ.regHandler(f.a.beginLive,function(i){console.log(i),t.doAuth(t.MOBILE_HOST+"watch/"+t.$route.params.id)});case 9:case"end":return i.stop()}},i,t)}))()},handleActivityStart:function(t){this.activity.countDown=1799},getInfo:function(){var t=this;return c()(s.a.mark(function i(){var a;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return(a=JSON.parse(sessionStorage.getItem("login")))&&(t.user.phone=a.mobile),i.next=4,t.$config({handlers:!0}).$get(I.a.GET_LIVEINFO,{activityId:t.$route.params.id}).then(function(i){t.activity.viewCondition=i.data.activity.viewCondition,t.activity.userId=i.data.activity.userId,t.activity.status=i.data.activity.status,t.activity.title=i.data.guide?i.data.guide.title:"",t.activity.description=i.data.guide?i.data.guide.description:"",t.activity.countDown=i.data.activity.countDown,t.activity.isCountdown=!!i.data.guide&&"COUNTDOWN"===i.data.guide.showType,t.user.isApplay=i.data.joinInfo.isApplay,t.user.isOrder=i.data.joinInfo.isOrder,t.viewLimit.canAppoint=i.data.viewLimit.canAppoint,t.viewLimit.finishTime=i.data.viewLimit.finishTime,t.extChannel=i.data.activity.extChannelRoom;var a=window.localStorage.getItem(t.visitorObj.visitorId+"_"+t.$route.params.id);if("LIVING"===t.activity.status||"PLAYBACK"===t.activity.status)"APPOINT"===t.activity.viewCondition?t.user.isApplay&&t.doAuth(t.MOBILE_HOST+"watch/"+t.$route.params.id):"NONE"===t.activity.viewCondition&&a&&t.doAuth(t.MOBILE_HOST+"watch/"+t.$route.params.id);else if(t.activity.countDown<1800)"APPOINT"===t.activity.viewCondition?t.user.isApplay&&t.doAuth(t.MOBILE_HOST+"watch/"+t.$route.params.id):"NONE"===t.activity.viewCondition&&a&&t.doAuth(t.MOBILE_HOST+"watch/"+t.$route.params.id);else var n=t.activity.countDown,e=setInterval(function(i){--n<1800&&(t.activity.countDown=1799,clearInterval(e))},1e3)}).catch(function(i){t.$messageBox({header:"提示",content:i.msg,confirmText:"确定",handleClick:function(t){"cancel"===t.action||t.action}})});case 4:t.getToken();case 5:case"end":return i.stop()}},i,t)}))()},getToken:function(){var t=this;("APPOINT"===this.activity.viewCondition&&this.user.isApplay||"APPOINT"!==this.activity.viewCondition)&&(this.chatParams.token?(this.vhallParams=this.chatParams,this.$nextTick(function(){t.initSdk()})):this.$config({handlers:!0}).$get(g.a.GET_USERREGACTIVITY,{activityId:this.$route.params.id}).then(function(i){t.$config({handlers:!0}).$get(I.a.GET_SDKTOKEN,{activityId:t.$route.params.id,activityUserId:i.data.activityUserId}).then(function(i){t.vhallParams.token=i.data.token,t.vhallParams.appId=i.data.appId,t.vhallParams.channelId=i.data.channelRoom,t.vhallParams.accountId=i.data.accountId,t.setChatParams(t.vhallParams),t.$nextTick(function(){t.initSdk()})})}))},joinWebinar:function(){window.localStorage.setItem(this.visitorObj.visitorId+"_"+this.$route.params.id,!0),this.jumpPage(this.MOBILE_HOST+"watch/")}})},O=(a(284),Object(l.a)(C,n,[],!1,null,"28ebadab",null));O.options.__file="src/pages/guide/index.vue";i.default=O.exports}}]);
//# sourceMappingURL=2.f9179ba8.js.map