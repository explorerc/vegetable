(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{146:function(t,e,i){},147:function(t,e,i){},148:function(t,e,i){},149:function(t,e,i){},150:function(t,e,i){},151:function(t,e,i){},152:function(t,e,i){},153:function(t,e,i){},154:function(t,e,i){},155:function(t,e,i){},158:function(t,e,i){},159:function(t,e,i){},160:function(t,e,i){},161:function(t,e,i){},162:function(t,e,i){},174:function(t,e,i){"use strict";var o=i(146);i.n(o).a},176:function(t,e,i){"use strict";var o=i(147);i.n(o).a},178:function(t,e,i){"use strict";var o=i(148);i.n(o).a},180:function(t,e,i){"use strict";var o=i(149);i.n(o).a},182:function(t,e,i){"use strict";var o=i(150);i.n(o).a},184:function(t,e,i){"use strict";var o=i(151);i.n(o).a},186:function(t,e,i){"use strict";var o=i(152);i.n(o).a},188:function(t,e,i){"use strict";var o=i(153);i.n(o).a},190:function(t,e,i){"use strict";var o=i(154);i.n(o).a},192:function(t,e,i){"use strict";var o=i(155);i.n(o).a},198:function(t,e,i){"use strict";var o=i(158);i.n(o).a},200:function(t,e,i){t.exports=i.p+"static/img/user.png"},201:function(t,e,i){t.exports=i.p+"static/img/default.png"},202:function(t,e,i){"use strict";var o=i(159);i.n(o).a},204:function(t,e,i){"use strict";var o=i(160);i.n(o).a},206:function(t,e,i){"use strict";var o=i(161);i.n(o).a},208:function(t,e,i){"use strict";var o=i(162);i.n(o).a},212:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("keep-alive",{attrs:{include:"Kind,Home"}},[i(t.currentTabComponent,{tag:"component",attrs:{isCartMange:t.isCartMange},on:{kindClick:function(e){t.changMenu("Kind")},saveUserInfo:function(e){t.changMenu("My")}}})],1),t._v(" "),"联系卖家"!==this.headTitle?i("div",{staticClass:"bottom-nav"},[i("mt-tabbar",{staticClass:"is-fixed",model:{value:t.selected=t.bottomActive,callback:function(e){t.selected=t.bottomActive=e},expression:"selected = bottomActive"}},[i("mt-tab-item",{attrs:{id:"Home"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="Home"}}},[i("i",{staticClass:"iconfont icon-shouye",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        首页\n      ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"Kind"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="Kind"}}},[i("i",{staticClass:"iconfont icon-leimupinleifenleileibie",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        分类\n      ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"Cart"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="Cart"}}},[i("i",{staticClass:"iconfont icon-gouwuche",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        购物车\n      ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"Record"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="Record"}}},[i("i",{staticClass:"iconfont icon-goumaijilu",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        订单\n      ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"User"},nativeOn:{click:function(e){e.preventDefault(),t.bottomActive="User"}}},[i("i",{staticClass:"iconfont icon-gerenzhongxin",attrs:{slot:"icon"},slot:"icon"}),t._v("\n        个人中心\n      ")])],1)],1):t._e()],1)};o._withStripped=!0;var n=i(210),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"title",rawName:"v-title"}],staticClass:"coupon",attrs:{"data-title":"优惠券"}},[t._l(t.coupons,function(e){return i("div",{},[i("CouponCard",{attrs:{coupon:e},on:{couponClick:t.couponClick}})],1)}),t._v(" "),i("mt-popup",{attrs:{"popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[i("div",{staticClass:"pop-con"},[t._v(t._s(t.popContent))])])],2)};s._withStripped=!0;var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"coupon-card"},[i("div",{staticClass:"stamp stamp01",on:{click:function(e){t.couponClick(t.coupon.id)}}},[i("div",{staticClass:"par"},[i("sub",{staticClass:"sign"},[t._v("￥")]),i("span",[t._v(t._s(t.coupon.favour))]),i("sub",[t._v("优惠券")]),i("p",[t._v("订单满"+t._s(t.coupon.total)+"元")])]),t._v(" "),i("div",{staticClass:"copy"},[t._v("副券"),i("p",[t._v(t._s(t.coupon.start_time.split(" ")[0])),i("br"),t._v(t._s(t.coupon.end_time.split(" ")[0]))])]),t._v(" "),i("i")])])};a._withStripped=!0;var c={name:"coupon-card",props:{coupon:{default:null,type:Object}},methods:{couponClick:function(t){this.$emit("couponClick",t)}}},r=(i(174),i(37)),l=Object(r.a)(c,a,[],!1,null,"5ae52212",null);l.options.__file="src/components/coupon-card.vue";var d="/coupon/info",u="/coup_user/add",f={name:"coupon",components:{CouponCard:l.exports},data:function(){return{coupons:[],popupVisible:!1,popContent:""}},methods:{queryCoupon:function(){var t=this;this.$get(d).then(function(e){200===e.code&&(t.coupons=e.data)})},couponClick:function(t){var e=this;this.$get(u,{couponId:t}).then(function(t){200===t.code?e.popContent="领取成功":300===t.code?e.popContent="你已经领取过优惠券":e.popContent="领取失败",e.popupVisible=!0,setTimeout(function(){clearTimeout(this.timer),this.timer=null,this.popupVisible=!1},3e3)})}},created:function(){this.queryCoupon()}},h=(i(176),Object(r.a)(f,s,[],!1,null,"0c108982",null));h.options.__file="src/pages/home/coupon.vue";var p=h.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"title",rawName:"v-title"}],staticClass:"record",attrs:{"data-title":"订单"}},[i("div",{staticClass:"head"},[i("button",{on:{click:function(e){t.orderKindClick("pay")}}},[i("i",{staticClass:"iconfont icon-daifukuan"}),i("span",[t._v("待付款")])]),t._v(" "),i("button",{on:{click:function(e){t.orderKindClick("send")}}},[i("i",{staticClass:"iconfont icon-daifahuo"}),i("span",[t._v("待发货")])]),t._v(" "),i("button",{on:{click:function(e){t.orderKindClick("receive")}}},[i("i",{staticClass:"iconfont icon-daishouhuo"}),i("span",[t._v("待收货")])]),t._v(" "),i("button",{on:{click:function(e){t.orderKindClick("accomplish")}}},[i("i",{staticClass:"iconfont icon-quanbudingdan"}),i("span",[t._v("已完成")])])]),t._v(" "),i("div",{staticClass:"content"},[i("div",{ref:"pay",staticClass:"order pay"},[i("div",{staticClass:"title"},[t._v("待付款("+t._s(t.payOrder.length)+")")]),t._v(" "),t._l(t.payOrder,function(e){return i("div",{staticClass:"good-info-box"},[i("goodInfo",{attrs:{goodInfo:e},on:{cancelOrder:function(i){t.cancelOrder(e.id)}}})],1)})],2),t._v(" "),i("div",{ref:"send",staticClass:"order send"},[i("div",{staticClass:"title"},[t._v("待发货("+t._s(t.sendOrder.length)+")")]),t._v(" "),t._l(t.sendOrder,function(t){return i("div",{staticClass:"good-info-box"},[i("goodInfo",{attrs:{goodInfo:t}})],1)})],2),t._v(" "),i("div",{ref:"receive",staticClass:"order receive"},[i("div",{staticClass:"title"},[t._v("待收货("+t._s(t.receiveOrder.length)+")")]),t._v(" "),t._l(t.receiveOrder,function(t){return i("div",{staticClass:"good-info-box"},[i("goodInfo",{attrs:{goodInfo:t}})],1)})],2),t._v(" "),i("div",{ref:"accomplish",staticClass:"order accomplish"},[i("div",{staticClass:"title"},[t._v("完成订单("+t._s(t.allOtherOrder.length)+")")]),t._v(" "),t._l(t.allOtherOrder,function(t){return i("div",{staticClass:"good-info-box"},[i("goodInfo",{attrs:{goodInfo:t}})],1)})],2)])])};v._withStripped=!0;var m="/orders/info",g="/orders/delete",_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"good-info"},[i("div",{staticClass:"cart-top"},[t.isCartShow?i("input",{attrs:{type:"checkbox",name:"goods"},domProps:{checked:t.goodInfo.isChecked},on:{click:function(e){t.clickSelected()}}}):t._e(),t._v(" "),i("img",{staticClass:"good-img",attrs:{src:t.goodInfo.imgUrl,alt:""},on:{click:function(e){t.goodDetail()}}}),t._v(" "),i("div",{staticClass:"good-des",on:{click:function(e){t.goodDetail()}}},[i("p",{staticClass:"good-name"},[t._v(t._s(t.goodInfo.name))]),t._v(" "),i("div",{staticClass:"price-box clearfix"},[0!==t.goodInfo.disprice&&t.goodInfo.disprice?i("span",{staticClass:"price"},[t._v("¥"+t._s(t.goodInfo.disprice))]):i("span",{staticClass:"price"},[t._v("¥"+t._s(t.goodInfo.price))]),t._v(" "),t.goodInfo.disprice?i("span",{staticClass:"del-price del-line"},[t._v("¥"+t._s(t.goodInfo.price))]):t._e(),t._v(" "),t.isCartShow?i("div",{staticClass:"clearfix choose-btn fr",staticStyle:{display:"inline-block"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"choose-amount"},[i("button",{staticClass:"minus",attrs:{disabled:t.goodInfo.number<=1},on:{click:t.minusNumberClick}},[t._v("-")]),i("input",{attrs:{type:"number"},domProps:{value:t.goodInfo.number}}),i("button",{staticClass:"add",on:{click:t.addNumberClick}},[t._v("+")])])]):t.isNumberShow?i("div",{staticClass:"fr info"},[i("span",[t._v("共"+t._s(t.goodInfo.number)+"商品")]),t._v(" "),t.goodInfo.disprice?i("span",[t._v("合计¥"+t._s((parseFloat(t.goodInfo.number)*parseFloat(t.goodInfo.disprice)).toFixed(1)))]):i("span",[t._v("合计 ¥"+t._s((parseFloat(t.goodInfo.number)*parseFloat(t.goodInfo.price)).toFixed(1)))])]):i("div",{staticClass:"fr cart"},[i("span",{staticClass:"iconfont icon-cart",on:{click:function(e){return e.stopPropagation(),t.addCart(e)}}})])])])]),t._v(" "),t.isPayShow?i("div",{staticClass:"cart-bottom"},[i("button",{on:{click:t.cancelOrder}},[t._v("取消订单")]),t._v(" "),i("button",[t._v("付款")])]):t._e(),t._v(" "),t.isSendShow?i("div",{staticClass:"cart-bottom"},[i("button",[t._v("提醒发货")]),t._v(" "),i("button",{on:{click:t.cancelSendOrder}},[t._v("取消订单")])]):t._e(),t._v(" "),t.isReceiveShow?i("div",{staticClass:"cart-bottom"},[i("button",[t._v("查看物流")]),t._v(" "),i("button",[t._v("确认收获")])]):t._e()])};_._withStripped=!0;var C=i(140),b={name:"good-info",props:{goodInfo:{},isCartShow:{default:!1,type:Boolean}},data:function(){return{goodsAmount:0,isNumberItemShow:!1,isPayShow:!1,isSendShow:!1,isReceiveShow:!1,isNumberShow:!1,goodsId:0}},methods:{minusNumberClick:function(){this.$emit("minusNumberClick")},addNumberClick:function(){this.$emit("addNumberClick")},clickSelected:function(){this.$emit("clickSelected")},isItemShow:function(){for(var t in this.goodInfo)"isPayed"===t&&(0===this.goodInfo.isPayed?this.isPayShow=!0:0===this.goodInfo.isSend?this.isSendShow=!0:0===this.goodInfo.isReceived&&(this.isReceiveShow=!0)),"number"===t&&(this.isNumberShow=!0)},addCart:function(){this.$emit("addCart")},goodDetail:function(){var t=this;this.goodsId=this.goodInfo.goodId?this.goodInfo.goodId:this.goodInfo.id,C.a.$emit("currentTabComponent","GoodDetail"),setTimeout(function(){C.a.$emit("goodsId",t.goodsId)},0)},cancelOrder:function(){this.$emit("cancelOrder")},cancelSendOrder:function(){this.$emit("cancelSendOrder")}},created:function(){this.isItemShow()},watch:{goodInfo:{handler:function(t,e){console.log(t)},deep:!0},"goodInfo.isClicked":{handler:function(t,e){console.log(t)}}}},k=(i(178),Object(r.a)(b,_,[],!1,null,"07d6acde",null));k.options.__file="src/components/good-info.vue";var I=k.exports,y=i(39),w={name:"index",components:{goodInfo:I},data:function(){return{ordersInfo:[],payOrder:[],sendOrder:[],receiveOrder:[],allOtherOrder:[]}},methods:{queryOrder:function(){var t=this;this.$get(m).then(function(e){t.ordersInfo=e.data,console.log(t.ordersInfo);for(var i=0;i<t.ordersInfo.length;i++)0===t.ordersInfo[i].status?t.payOrder.push(t.ordersInfo[i]):1===t.ordersInfo[i].status?t.sendOrder.push(t.ordersInfo[i]):2===t.ordersInfo[i].status?t.receiveOrder.push(t.ordersInfo[i]):3===t.ordersInfo[i].status&&t.allOtherOrder.push(t.ordersInfo[i])})},orderKindClick:function(t){var e=void 0;"pay"===t?e=this.$refs.pay.getBoundingClientRect().top:"send"===t?e=this.$refs.send.getBoundingClientRect().top:"receive"===t?e=this.$refs.receive.getBoundingClientRect().top:"accomplish"===t&&(e=this.$refs.accomplish.getBoundingClientRect().top),document.getElementsByClassName("container")[0].scrollTop=e},cancelOrder:function(t){var e=this;Object(y.MessageBox)({title:"",message:"亲，确认取消订单吗？",showCancelButton:!0}).then(function(i){"confirm"===i&&e.$get(g,{id:t}).then(function(t){200===t.code&&(console.log("删除成功"),e.queryOrder())})})}},created:function(){this.queryOrder()}},T=(i(180),Object(r.a)(w,v,[],!1,null,"9952c3d0",null));T.options.__file="src/pages/record/index.vue";var x=T.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cart"},[i("span",[t._v("共有"+t._s(t.cartList.length)+"件商品")]),t._v(" "),i("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},t._l(t.cartList,function(e,o){return i("li",[i("goodInfo",{attrs:{goodInfo:e,isCartShow:t.isCartShow},on:{minusNumberClick:function(i){t.minusNumberClick(e.id)},addNumberClick:function(i){t.addNumberClick(e.id)},clickSelected:function(e){t.clickSelected(o)}}})],1)})),t._v(" "),i("div",{staticClass:"cart-bottom clearfix"},[i("div",{staticClass:"fl"},[i("input",{attrs:{type:"checkbox",name:"goods"},domProps:{checked:this.isAllChecked},on:{click:t.allClickSelected}}),t._v(" "),i("span",[t._v("全选")])]),t._v(" "),t.isCartMange?i("div",{staticClass:"fr"},[i("button",{staticClass:"delete-btn",on:{click:t.deleteSelected}},[t._v("删除")])]):i("div",{staticClass:"fr"},[i("span",[t._v("合计："),i("span",[t._v("¥"+t._s(t.cartTotalMoney.toFixed(1)))])]),t._v(" "),i("button",{staticClass:"pay-btn",on:{click:t.payGoods}},[t._v("结算("+t._s(t.selectedNum)+")")])])]),t._v(" "),i("mt-popup",{attrs:{"popup-transition":"popup-fade"},model:{value:t.popPayVisible,callback:function(e){t.popPayVisible=e},expression:"popPayVisible"}},[i("div",{staticClass:"pop-con"},[t._v(t._s(t.popCon))])])],1)};S._withStripped=!0;var O=i(46),M=i.n(O),$=i(139),N=i.n($),E=i(142),P={name:"index",components:{goodInfo:I},data:function(){return{goodsNum:0,cartList:[],selectedGoods:[],cartTotalMoney:0,isAllChecked:!1,selectedNum:0,isCartShow:!0,popPayVisible:!1,timer:null,popCon:""}},props:{isCartMange:{default:!1,type:Boolean}},methods:{minusNumberClick:function(t){var e=this;this.$get(E.a.GET_CART_MINNUM,{id:t}).then(function(i){if(200===i.code){for(var o=0;o<e.cartList.length;o++)e.cartList[o].id===t&&e.cartList[o].number--;e.totalMoney()}})},addNumberClick:function(t){var e=this;this.$get(E.a.GET_CART_ADDNUM,{params:{id:t}}).then(function(i){if(200===i.code){for(var o=0;o<e.cartList.length;o++)e.cartList[o].id===t&&e.cartList[o].number++;e.totalMoney()}})},queryCartList:function(){var t=this;this.cartList=[],this.$get(E.a.GET_CART_INFO).then(function(e){if(200===e.code)for(var i=0;i<e.data.length;i++)t.cartList.push(N()({},e.data[i],{isChecked:!1}))}).catch(function(t){console.log(t)})},loadMore:function(){},totalMoney:function(){this.cartTotalMoney=0,this.selectedNum=0,this.selectedGoods=[];for(var t=0;t<this.cartList.length;t++)this.cartList[t].isChecked&&(this.selectedGoods.push(this.cartList[t]),this.cartTotalMoney=this.cartList[t].price*this.cartList[t].number+this.cartTotalMoney,this.selectedNum=this.selectedNum+1)},clickSelected:function(t){this.cartList[t].isChecked=!this.cartList[t].isChecked,this.totalMoney(),this.selectedNum===this.cartList.length?this.isAllChecked=!0:this.isAllChecked=!1},allClickSelected:function(){this.isAllChecked=!this.isAllChecked;for(var t=0;t<this.cartList.length;t++)this.cartList[t].isChecked=this.isAllChecked,this.isAllChecked?(this.selectedGoods=[].concat(M()(this.cartList)),this.totalMoney()):(this.selectedGoods=[],this.cartTotalMoney=0,this.selectedNum=0)},deleteSelected:function(){var t=this,e=[];if(this.selectedGoods.length<=0)return this.popPayVisible=!0,this.popCon="请选择需要删除的商品",void(this.timer=setTimeout(function(){clearTimeout(this.timer),this.timer=null,this.popPayVisible=!1},3e3));this.selectedGoods.forEach(function(t,i){e.push(t.id)}),this.$http.get(E.a.GET_CART_DEL,{params:{ids:e}}).then(function(e){200===e.status&&t.queryCartList()})},payGoods:function(){var t=this;this.selectedNum>0?(console.log(this.selectedGoods),setTimeout(function(){C.a.$emit("selectedGoods",t.selectedGoods)},0),C.a.$emit("currentTabComponent","Pay")):(this.popPayVisible=!0,this.popCon="请选择结算的商品",this.timer=setTimeout(function(){clearTimeout(this.timer),this.timer=null,this.popPayVisible=!1},3e3))}},created:function(){this.queryCartList()},watch:{cartList:{handler:function(t,e){console.log(this.cartList)},deep:!0},"cartList.isClicked":{handler:function(t,e){console.log(t)}}}},A=(i(182),Object(r.a)(P,S,[],!1,null,"72707db2",null));A.options.__file="src/pages/cart/index.vue";var G=A.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"title",rawName:"v-title"}],staticClass:"user",attrs:{"data-title":"个人中心"}},[i("div",{staticClass:"top"},[i("div",{staticClass:"edit",on:{click:t.editUserInfo}},[i("i",{staticClass:"iconfont icon-bianji"})]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"nickname"},[i("span",[t._v("昵称：")]),i("span",[t._v(t._s(t.userInfo.nickname))])])]),t._v(" "),i("div",{staticClass:"name-box item"},[i("i",{staticClass:"iconfont icon-username"}),i("span",[t._v("名字：")]),i("span",[t._v(t._s(t.userInfo.name))])]),t._v(" "),i("div",{staticClass:"tel-box item"},[i("i",{staticClass:"iconfont icon-tel"}),i("span",[t._v("手机：")]),i("span",[t._v(t._s(t.userInfo.tel))])]),t._v(" "),i("div",{staticClass:"birth-box item"},[i("i",{staticClass:"iconfont icon-shengrilijin"}),i("span",[t._v("生日：")]),t.userInfo.birth?i("span",[t._v(t._s(t.userInfo.birth.split(" ")[0]))]):i("span",[t._v("设置")])]),t._v(" "),i("div",{staticClass:"address-box item"},[i("i",{staticClass:"iconfont icon-dizhi"}),i("span",[t._v("地址：")]),i("span",[t._v(t._s(t.userInfo.address))])]),t._v(" "),i("div",{staticClass:"connect-box item",on:{click:t.connectBtn}},[i("i",{staticClass:"iconfont icon-lianxi"}),i("span",[t._v("联系卖家")]),i("span")])])};D._withStripped=!0;var L=i(38),B={name:"index",data:function(){return{userInfo:{},currentTabComponent:"",rangeValue:0}},methods:{queryUserInfo:function(){var t=this;this.$get(L.a.GET_USER_INFO,{}).then(function(e){200===e.code&&(t.userInfo=e.data,console.log(t.userInfo))})},editUserInfo:function(){C.a.$emit("currentTabComponent","Edit")},connectBtn:function(){C.a.$emit("currentTabComponent","Chat")}},created:function(){this.queryUserInfo()},watch:{}},U=(i(184),Object(r.a)(B,D,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"aviator"},[e("img",{attrs:{src:"http://b-ssl.duitang.com/uploads/blog/201404/23/20140423205758_FJ4NN.jpeg",alt:""}})])}],!1,null,"4070cfdc",null));U.options.__file="src/pages/user/index.vue";var K=U.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"title",rawName:"v-title"}],staticClass:"edit",attrs:{"data-title":"信息编辑"}},[i("mt-field",{attrs:{label:"姓名",placeholder:"请输入用户名"},model:{value:t.userInfo.name,callback:function(e){t.$set(t.userInfo,"name",e)},expression:"userInfo.name"}}),t._v(" "),i("mt-field",{attrs:{label:"昵称",placeholder:"请输入昵称"},model:{value:t.userInfo.nickname,callback:function(e){t.$set(t.userInfo,"nickname",e)},expression:"userInfo.nickname"}}),t._v(" "),i("mt-field",{attrs:{label:"手机",placeholder:"请输入手机号",type:"tel"},model:{value:t.userInfo.tel,callback:function(e){t.$set(t.userInfo,"tel",e)},expression:"userInfo.tel"}}),t._v(" "),i("mt-field",{attrs:{label:"生日",placeholder:"请输入生日日期",type:"date"},model:{value:t.userInfo.birth,callback:function(e){t.$set(t.userInfo,"birth",e)},expression:"userInfo.birth"}}),t._v(" "),i("mt-field",{attrs:{label:"地址",placeholder:"请输入收货地址",type:"text"},model:{value:t.userInfo.address1,callback:function(e){t.$set(t.userInfo,"address1",e)},expression:"userInfo.address1"}}),t._v(" "),i("div",{staticClass:"save-box"},[i("button",{on:{click:t.saveUserInfo}},[t._v("保存")])])],1)};V._withStripped=!0;var j={name:"edit",data:function(){return{userInfo:{},pickerVisible:!0}},methods:{queryUserInfo:function(){var t=this;this.$http.get(L.a.GET_USER_INFO).then(function(e){200===e.code&&(t.userInfo=e.data[0],t.userInfo.birth=t.userInfo.birth.split(" ")[0],console.log(t.userInfo))})},saveUserInfo:function(){var t=this;this.$get(L.a.GET_USER_UPDATE,N()({},this.userInfo)).then(function(e){200===e.status&&(C.a.$emit("currentTabComponent","My"),t.$emit("saveUserInfo"))})}},created:function(){this.queryUserInfo()}},F=(i(186),Object(r.a)(j,V,[],!1,null,"fe0f7e0c",null));F.options.__file="src/pages/user/edit.vue";var R=F.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom-nav"},[i("mt-tabbar",{staticClass:"is-fixed",model:{value:t.selected=t.active,callback:function(e){t.selected=t.active=e},expression:"selected = active"}},[i("mt-tab-item",{attrs:{id:"home"},nativeOn:{click:function(e){e.preventDefault(),t.active="home"}}},[i("i",{staticClass:"iconfont icon-shouye",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      首页\n    ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"kind"},nativeOn:{click:function(e){e.preventDefault(),t.active="kind"}}},[i("i",{staticClass:"iconfont icon-leimupinleifenleileibie",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      分类\n    ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"cart"},nativeOn:{click:function(e){e.preventDefault(),t.active="cart"}}},[i("i",{staticClass:"iconfont icon-gouwuche",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      购物车\n    ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"record"},nativeOn:{click:function(e){e.preventDefault(),t.active="record"}}},[i("i",{staticClass:"iconfont icon-goumaijilu",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      订单\n    ")]),t._v(" "),i("mt-tab-item",{attrs:{id:"my"},nativeOn:{click:function(e){e.preventDefault(),t.active="my"}}},[i("i",{staticClass:"iconfont icon-gerenzhongxin",attrs:{slot:"icon"},slot:"icon"}),t._v("\n      个人中心\n    ")])],1)],1)};q._withStripped=!0;var H={name:"bottomNav",data:function(){return{active:"home"}},watch:{active:function(t){this.$emit("change",t)}}},X=(i(188),Object(r.a)(H,q,[],!1,null,"7d65d011",null));X.options.__file="src/components/bottom-nav.vue";var W=X.exports,z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"head"},[i("mt-header",{staticClass:"is-fixed",attrs:{title:t.headTitle}},[i("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[t.isHeadClose?t._e():i("mt-button",{staticClass:"iconfont icon-back"}),t._v(" "),t.isHeadClose?i("mt-button",{staticClass:"iconfont icon-close",on:{click:t.handleClose}}):t._e()],1),t._v(" "),"购物车"===t.headTitle?i("mt-button",{staticClass:"cart-manger",attrs:{slot:"right"},on:{click:t.cartMangerClick},slot:"right"},[t._v("管理")]):i("mt-button",{attrs:{slot:"right",icon:"more"},slot:"right"})],1)],1)};z._withStripped=!0;var J={name:"head-nav",data:function(){return{}},props:{headTitle:{type:String},isHeadClose:{type:Boolean,default:!0},isCart:{type:Boolean,default:!1}},methods:{handleClose:function(){},cartMangerClick:function(){this.$emit("cartMangerClick")}}},Y=(i(190),Object(r.a)(J,z,[],!1,null,"20a8fcc6",null));Y.options.__file="src/components/head-nav.vue";var Q=Y.exports,Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"title",rawName:"v-title"}],staticClass:"kind",attrs:{"data-title":"商品分类"}},[i("div",{staticClass:"head"},[i("search")],1),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"kind-list"},[i("ul",[i("li",{class:{active:0===t.index},on:{click:function(e){t.changeKind(0)}}},[t._v("全部")]),t._v(" "),t._l(t.kindList,function(e,o){return i("li",{class:{active:e.id===t.index},on:{click:function(i){t.changeKind(e.id)}}},[t._v(t._s(e.name))])})],2)]),t._v(" "),i("div",{staticClass:"good-list"},t._l(t.goodKindInfo,function(e){return i("div",[i("GoodInfo",{attrs:{goodInfo:e},on:{addCart:function(i){t.addCart(e.id)}}})],1)})),t._v(" "),i("div",{staticClass:"clearfix"})]),t._v(" "),i("mt-popup",{attrs:{"popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[i("div",{staticClass:"pop-con"},[t._v(t._s(t.popContent))])])],1)};Z._withStripped=!0;var tt=i(163),et=i(164),it=i(141),ot={name:"kind",components:{Search:tt.a,GoodInfo:I},data:function(){return{kindList:[],index:0,goodInfo:[],goodKindInfo:[],popupVisible:!1,popContent:"",timer:null}},methods:{changeKind:function(t){if(this.index=t,this.goodKindInfo=[],0===t)this.goodKindInfo=this.goodInfo;else for(var e=0;e<this.goodInfo.length;e++)this.goodInfo[e].kindId===t&&this.goodKindInfo.push(this.goodInfo[e])},queryKind:function(){var t=this;this.$get(et.a.GET_KIND_INFO,{}).then(function(e){200===e.code&&(t.kindList=e.data)})},queryGoodInfo:function(){var t=this;this.$get(it.a.GET_GOODS_INFO,{}).then(function(e){200===e.code&&(t.goodInfo=e.data,t.goodKindInfo=t.goodInfo)})},addCart:function(t){var e=this;this.$get(E.a.GET_CART_ADD,{userId:1,goodId:t,number:1}).then(function(t){200===t.code&&(e.popContent=t.data,e.popupVisible=!0,e.timer=setTimeout(function(){clearTimeout(this.timer),this.timer=null,this.popupVisible=!1},3e3))})}},created:function(){var t=this;this.queryKind(),this.queryGoodInfo(),C.a.$on("kindId",function(e){t.index=e})}},nt=(i(192),Object(r.a)(ot,Z,[],!1,null,"425c9bdb",null));nt.options.__file="src/pages/kind/kind.vue";var st=nt.exports,at=i(211),ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"title",rawName:"v-title"}],staticClass:"search-result",attrs:{"data-title":"搜索商品"}},[i("Search",{attrs:{isSearchPage:!0},on:{search:t.search}}),t._v(" "),i("div",{staticClass:"good-list"},t._l(t.goodInfo,function(e){return i("div",[i("GoodInfo",{attrs:{goodInfo:e},on:{addCart:function(i){t.addCart(e.id)}}})],1)}))],1)};ct._withStripped=!0;var rt={name:"goodDetail",components:{Search:tt.a,GoodInfo:I},props:{isSearchPage:{default:!0,type:Boolean}},data:function(){return{goodId:0,goodInfo:[],number:1}},methods:{search:function(t){var e=this;this.$get(it.a.GET_GOOD_KEY,{key:t}).then(function(t){200===t.code&&(e.goodInfo=t.data)})},addCart:function(t){this.$get(E.a.GET_CART_ADD,{userId:1,goodId:t,number:1}).then(function(t){200===t.code&&alert(t.data)})}},mounted:function(){document.getElementsByClassName("searchInput")[0].focus()},created:function(){},watch:{isSearchPage:{handler:function(t,e){},deep:!0}}},lt=(i(198),Object(r.a)(rt,ct,[],!1,null,"38da8366",null));lt.options.__file="src/pages/good/search.vue";var dt=lt.exports,ut=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"chat"}},[e("ChatList")],1)};ut._withStripped=!0;var ft=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("section",{staticClass:"chatlist",class:t.showSelBox>0?"chatlist-bottom-collapse":"chatlist-bottom"},[o("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"top-pull-text":"加载更多","top-drop-text":"释放加载"},on:{"top-status-change":t.handleTopChange}},[o("ul",[t._l(t.records,function(e){return[1==e.type?o("li",{staticClass:"chat-mine"},[o("div",{staticClass:"chat-user"},[o("img",{attrs:{src:i(200)}})]),t._v(" "),o("div",{staticClass:"time"},[o("cite",[o("i",[t._v(t._s(e.time))]),t._v(t._s(e.name))])]),t._v(" "),o("div",{staticClass:"chat-text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}})]):t._e(),t._v(" "),2==e.type?o("li",[o("div",{staticClass:"chat-user"},[o("img",{attrs:{src:i(201)}})]),t._v(" "),o("div",{staticClass:"time"},[o("cite",[t._v(t._s(e.name)),o("i",[t._v(t._s(e.time))])])]),t._v(" "),o("div",{staticClass:"chat-text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}})]):t._e()]})],2)])],1),t._v(" "),o("section",{staticClass:"foot"},[o("mt-field",{staticClass:"con",attrs:{id:"txtContent",placeholder:"请输入消息"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),o("span",{staticClass:"btn-face",on:{click:function(e){t.showSelBox=1===t.showSelBox?0:1}}},[o("i",{staticClass:"iconfont icon-smile",attrs:{"aria-hidden":"true"}})]),t._v(" "),o("span",{staticClass:"btn btn-send",on:{click:t.sendMsg}},[t._v("发送")]),t._v(" "),o("section",{staticClass:"selbox",class:t.showSelBox>0?"show":"hide"},[o("section",{directives:[{name:"show",rawName:"v-show",value:1===t.showSelBox,expression:"showSelBox===1"}],staticClass:"face-box"},[o("mt-swipe",{attrs:{auto:0,continuous:!1}},t._l(Math.ceil(t.EXPS.length/18),function(e){return o("mt-swipe-item",t._l(t.getEXP(e,18),function(e,i){return o("li",[o("img",{attrs:{src:"static/emotion/"+e.file,alt:"",data:e.code},on:{click:function(i){t.content+=e.code}}})])}))}))],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:2===t.showSelBox,expression:"showSelBox===2"}]},[t._v(t._s(t.selOther))])])],1)])};ft._withStripped=!0;var ht=/([yMdhsm])(\1*)/g;function pt(t,e){e-=(t+"").length;for(var i=0;i<e;i++)t="0"+t;return t}var vt={format:function(t,e){return(e=e||"yyyy-MM-dd").replace(ht,function(e){switch(e.charAt(0)){case"y":return pt(t.getFullYear(),e.length);case"M":return pt(t.getMonth()+1,e.length);case"d":return pt(t.getDate(),e.length);case"w":return t.getDay()+1;case"h":return pt(t.getHours(),e.length);case"m":return pt(t.getMinutes(),e.length);case"s":return pt(t.getSeconds(),e.length)}})},parse:function(t,e){var i=e.match(ht),o=t.match(/(\d)+/g);if(i.length===o.length){for(var n=new Date(1970,0,1),s=0;s<i.length;s++){var a=parseInt(o[s]);switch(i[s].charAt(0)){case"y":n.setFullYear(a);break;case"M":n.setMonth(a-1);break;case"d":n.setDate(a);break;case"h":n.setHours(a);break;case"m":n.setMinutes(a);break;case"s":n.setSeconds(a)}}return n}return null}},mt={name:"chatlist",data:function(){return{showSelBox:0,selFace:"表情",selOther:"其他功能",content:"",topStatus:"",records:[{type:1,time:vt.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"游客",content:"你好！"},{type:2,time:vt.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客户MM",content:'这里是<a target="_blank" href="https://github.com/taylorchen709/vue-chat">源码</a>'}],EXPS:[{file:"100.gif",code:"/::)",title:"微笑",reg:/\/::\)/g},{file:"101.gif",code:"/::~",title:"伤心",reg:/\/::~/g},{file:"102.gif",code:"/::B",title:"美女",reg:/\/::B/g},{file:"103.gif",code:"/::|",title:"发呆",reg:/\/::\|/g},{file:"104.gif",code:"/:8-)",title:"墨镜",reg:/\/:8-\)/g},{file:"105.gif",code:"/::<",title:"哭",reg:/\/::</g},{file:"106.gif",code:"/::$",title:"羞",reg:/\/::\$/g},{file:"107.gif",code:"/::X",title:"哑",reg:/\/::X/g},{file:"108.gif",code:"/::Z",title:"睡",reg:/\/::Z/g},{file:"109.gif",code:"/::'(",title:"哭",reg:/\/::'\(/g},{file:"110.gif",code:"/::-|",title:"囧",reg:/\/::-\|/g},{file:"111.gif",code:"/::@",title:"怒",reg:/\/::@/g},{file:"112.gif",code:"/::P",title:"调皮",reg:/\/::P/g},{file:"113.gif",code:"/::D",title:"笑",reg:/\/::D/g},{file:"114.gif",code:"/::O",title:"惊讶",reg:/\/::O/g},{file:"115.gif",code:"/::(",title:"难过",reg:/\/::\(/g},{file:"116.gif",code:"/::+",title:"酷",reg:/\/::\+/g},{file:"117.gif",code:"/:--b",title:"汗",reg:/\/:--b/g},{file:"118.gif",code:"/::Q",title:"抓狂",reg:/\/::Q/g},{file:"119.gif",code:"/::T",title:"吐",reg:/\/::T/g},{file:"120.gif",code:"/:,@P",title:"笑",reg:/\/:,@P/g},{file:"121.gif",code:"/:,@-D",title:"快乐",reg:/\/:,@-D/g},{file:"122.gif",code:"/::d",title:"奇",reg:/\/::d/g},{file:"123.gif",code:"/:,@o",title:"傲",reg:/\/:,@o/g},{file:"124.gif",code:"/::g",title:"饿",reg:/\/::g/g},{file:"125.gif",code:"/:|-)",title:"累",reg:/\/:\|-\)/g},{file:"126.gif",code:"/::!",title:"吓",reg:/\/::!/g}]}},methods:{getEXP:function(t,e){return this.EXPS.slice((t-1)*e,e*t)},sendMsg:function(){var t=this;if(""!==this.content){var e={type:1,time:vt.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"游客",content:this.content};this.records.push(e),setTimeout(function(){t.records.push({type:2,time:vt.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客服MM",content:"你好！"})},100),this.content="",this.scrollToBottom()}else Object(y.Toast)("请输入消息")},focusTxtContent:function(){document.querySelector("#txtContent input").focus()},scrollToBottom:function(){setTimeout(function(){var t=document.getElementsByClassName("chatlist")[0];t.scrollTop=t.scrollHeight},100)},replaceFace:function(t){for(var e=this.EXPS,i=0;i<e.length;i++)t=t.replace(e[i].reg,'<img src="static/emotion/'+e[i].file+'"  alt="" />');return t},handleTopChange:function(t){this.topStatus=t},loadTop:function(t){var e=this,i=this;setTimeout(function(){var o=document.getElementsByClassName("chatlist")[0],n=o.scrollHeight;i.records.unshift({type:1,time:vt.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"游客",content:"你好！13213"},{type:2,time:vt.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客户MM",content:'这里是<a target="_blank" href="https://github.com/taylorchen709/vue-chat">源码</a>13213'}),setTimeout(function(){var t=o.scrollHeight;o.scrollTop=t-n},100),e.$refs.loadmore.onTopLoaded(t)},1500)},initWebSocket:function(){this.websock=new WebSocket("ws://localhost:2346"),this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose},websocketonopen:function(){console.log("WebSocket连接成功")},websocketonerror:function(t){console.log("WebSocket连接发生错误")},websocketonmessage:function(t){var e=JSON.parse(t.data);console.log(e.value)},websocketsend:function(t){this.websock.send(t)},websocketclose:function(t){console.log("connection closed ("+t.code+")")}},mounted:function(){this.scrollToBottom(),this.focusTxtContent()},created:function(){this.initWebSocket()}},gt=(i(202),Object(r.a)(mt,ft,[],!1,null,"9d5d1d74",null));gt.options.__file="src/components/ChatList.vue";var _t={name:"app",components:{ChatList:gt.exports}},Ct=(i(204),Object(r.a)(_t,ut,[],!1,null,"77280f48",null));Ct.options.__file="src/pages/user/chat.vue";var bt=Ct.exports,kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"title",rawName:"v-title"}],staticClass:"pay",attrs:{"data-title":"支付"}},[i("div",{staticClass:"user"},[i("div",{staticClass:"info"},[i("span",{staticClass:"name"},[t._v(t._s(t.userInfo.name))]),i("span",{staticClass:"tel"},[t._v(t._s(t.userInfo.tel))])]),t._v(" "),i("div",[i("div",{staticClass:"address"},[i("i",{staticClass:"iconfont icon-dizhi"}),i("span",[t._v(t._s(t.userInfo.address))])])])]),t._v(" "),i("div",{staticClass:"goods"},t._l(t.selectedGoods,function(e){return i("div",{key:e.id,staticClass:"item"},[i("div",{staticClass:"cover"},[i("img",{attrs:{src:e.imgUrl,alt:""}})]),t._v(" "),i("div",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"sale"},[e.disPrice?i("p",[t._v("￥"+t._s(e.disPrice))]):i("p",[t._v("￥"+t._s(e.price))]),t._v(" "),i("p",[t._v("X"+t._s(e.number))])])])})),t._v(" "),i("div",{staticClass:"pay-bottom clearfix"},[i("div",{staticClass:"fr"},[i("span",{staticClass:"total"},[t._v("共"+t._s(t.selectedGoods.length)+"件，")]),t._v(" "),i("span",[t._v("合计：¥"+t._s(t.cartTotalMoney))]),t._v(" "),i("button",{staticClass:"pay-btn",on:{click:t.payOrder}},[t._v("提交订单")])])]),t._v(" "),i("mt-popup",{attrs:{"popup-transition":"popup-fade"},model:{value:t.popPayVisible,callback:function(e){t.popPayVisible=e},expression:"popPayVisible"}},[i("div",{staticClass:"pop-con"},[t._v("\n              这人是一个付钱的弹框\n        ")])])],1)};kt._withStripped=!0;var It={name:"index",components:{goodInfo:I},data:function(){return{selectedNum:0,selectedGoods:[],userInfo:{},popPayVisible:!1,timer:null}},methods:{queryUserInfo:function(){var t=this;this.$get(L.a.GET_USER_INFO).then(function(e){200===e.code&&(t.userInfo=e.data,console.log(t.userInfo))})},payOrder:function(){this.popPayVisible=!0}},computed:{cartTotalMoney:function(){var t=0;return this.selectedGoods.forEach(function(e,i){e.disPrice?t+=parseFloat(e.disPrice)*e.number:t+=parseFloat(e.price)*e.number}),t.toFixed(2)}},created:function(){var t=this;C.a.$on("selectedGoods",function(e){t.selectedGoods=e,console.log(t.selectedGoods)}),this.queryUserInfo()},watch:{}},yt=(i(206),Object(r.a)(It,kt,[],!1,null,"8ac60d86",null));yt.options.__file="src/pages/cart/pay.vue";var wt=yt.exports,Tt={components:{Home:n.default,User:K,Record:x,Cart:G,bottomNav:W,headNav:Q,Kind:st,GoodDetail:at.default,Edit:R,SearchPage:dt,Chat:bt,Coupon:p,Pay:wt},name:"layout",props:{},data:function(){return{currentTabComponent:n.default,headTitle:"商城首页",isHeadClose:!0,isCartMange:!1,bottomActive:"Home"}},methods:{changMenu:function(t){"Home"===t?(this.currentTabComponent=n.default,this.headTitle="商城首页",this.bottomActive="Home"):"User"===t?(this.currentTabComponent=K,this.headTitle="个人中心",this.bottomActive="User"):"Record"===t?(this.currentTabComponent=x,this.bottomActive="Record",this.headTitle="购买记录"):"Cart"===t?(this.currentTabComponent=G,this.headTitle="购物车",this.bottomActive="Cart"):"Kind"===t?(this.currentTabComponent=st,this.headTitle="商品分类",this.bottomActive="Kind"):"GoodDetail"===t?(this.currentTabComponent=at.default,this.headTitle="商品详情",this.bottomActive=""):"Edit"===t?(this.currentTabComponent=R,this.headTitle="编辑个人信息",this.bottomActive=""):"SearchPage"===t?(this.currentTabComponent=dt,this.headTitle="商品搜索",this.bottomActive=""):"Chat"===t?(this.currentTabComponent=bt,this.headTitle="联系卖家",this.bottomActive=""):"Coupon"===t?(this.currentTabComponent=p,this.headTitle="优惠券",this.bottomActive=""):"Pay"===t&&(this.currentTabComponent=wt,this.headTitle="支付",this.bottomActive="")},cartManferClick:function(){this.isCartMange=!this.isCartMange},handleClose:function(){},kindClick:function(){this.bottomActive="Kind",this.changMenu("Kind")},saveUserInfo:function(){this.bottomActive="My",this.changMenu("User")}},created:function(){var t=this;C.a.$on("currentTabComponent",function(e){t.changMenu(e)})},watch:{bottomActive:{handler:function(t,e){this.changMenu(t)}}}},xt=(i(208),Object(r.a)(Tt,o,[],!1,null,"bdd7b4a4",null));xt.options.__file="src/pages/layout.vue";e.default=xt.exports}}]);
//# sourceMappingURL=3.a37f990a.js.map