(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{201:function(e,t,i){},249:function(e,t,i){"use strict";var r=i(201);i.n(r).a},302:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-checkState"},[e.user.isDisabled?i("com-input",{attrs:{inputVal:e.user.phone,placeholder:"请输入手机号",maxLength:11,isDisabled:"disabled",errorMsg:e.phoneError},on:{"update:inputVal":function(t){e.$set(e.user,"phone",t)},"update:errorMsg":function(t){e.phoneError=t}}}):i("com-input",{attrs:{inputVal:e.user.phone,placeholder:"请输入手机号",maxLength:11,errorMsg:e.phoneError},on:{"update:inputVal":function(t){e.$set(e.user,"phone",t)},"update:errorMsg":function(t){e.phoneError=t}}}),e._v(" "),e.user.isDisabled?e._e():i("com-verification-code",{attrs:{phone:e.user.phone,inputVal:e.code,code:e.code,isGetCode:e.isGetCode,placeholder:"输入验证码",maxLength:6,errorMsg:e.codeError,codeType:"CONSUMER_USER_LOGIN"},on:{"update:inputVal":function(t){e.code=t},"update:code":function(t){e.code=t},inputFocus:function(t){e.getCode(t)},"update:errorMsg":function(t){e.codeError=t}}}),e._v(" "),i("button",{staticClass:"primary-button",on:{click:e.submit}},[e._v("提交")])],1)};r._withStripped=!0;var s=i(14),o=i.n(s),a=i(227),n=i(226),c=i(63),d=i(187),u={data:()=>({code:"",isGetCode:!0,activity:{viewCondition:"APPOINT",status:""},user:{phone:"",isApplay:!1,isOrder:!1,isDisabled:!1},codeError:"",phoneError:""}),mounted(){},components:{"com-input":a.a,"com-verification-code":n.a},created(){this.getActivity();let e=JSON.parse(sessionStorage.getItem("login"));e&&(this.user.phone=e.mobile,this.user.phone&&(this.user.isDisabled=!0))},watch:{},methods:{getCode(e){this.code=e},subScribe(){c.a.subScribe({activityId:this.$route.params.id,__errHandler:!0}).then(e=>{200===e.code?this.$router.replace("/guid/"+this.$route.params.id):this.$messageBox({header:"提示",content:e.msg,confirmText:"确定",handleClick:e=>{"cancel"===e.action||e.action}})})},submit(){return this.verification(this.user.phone,"Y","mobile")?this.user.isDisabled||this.verification(this.code,"Y","integer")?void(this.user.isOrder||this.user.isDisabled?this.subScribe():d.a.login({mobile:this.user.phone,code:this.code,wechatAuth:sessionStorage.getItem("wechatAuth"),__errHandler:!0}).then(e=>{200===e.code&&(e.data?(sessionStorage.setItem("login",o()(e.data)),c.a.getWebinarinfo({activityId:this.$route.params.id,__errHandler:!0}).then(e=>{200===e.code?e.data.joinInfo.isOrder?this.$router.replace("/guid/"+this.$route.params.id):this.subScribe():this.$messageBox({header:"提示",content:e.msg,confirmText:"确定",handleClick:e=>{"cancel"===e.action||e.action}})})):(this.$messageBox({header:"提示",content:e.msg,confirmText:"确定",handleClick:e=>{"cancel"===e.action||e.action}}),sessionStorage.removeItem("login"),sessionStorage.removeItem("wechatAuth")))})):(this.codeError="请输入正确验证码",!1):(this.phoneError="请正确填写手机号",!1)},verification(e,t,i){let r=/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,s=/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/,o=/^[0-9]*$/;if("mobile"===i&&(e=""===this.user.phone?e:this.user.phone),""===e){if("Y"===t)return!1}else switch(i){case"mobile":return e=""===this.user.phone?e:this.user.phone,r.test(e);case"integer":return o.test(e);case"email":return s.test(e)}return!0},getActivity(){c.a.getWebinarinfo({activityId:this.$route.params.id,__errHandler:!0}).then(e=>{200===e.code&&(this.activity.viewCondition=e.data.activity.viewCondition,this.activity.status=e.data.activity.status,this.user.isApplay=e.data.joinInfo.isApplay,this.user.isOrder=e.data.joinInfo.isOrder)})}}},h=(i(249),i(1)),p=Object(h.a)(u,r,[],!1,null,"40b23aa5",null);p.options.__file="src/pages/guide/check-state.vue";t.default=p.exports}}]);
//# sourceMappingURL=7.f43d51ee.js.map