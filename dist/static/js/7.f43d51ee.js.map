{"version":3,"sources":["webpack:///./src/pages/guide/check-state.vue?906f","webpack:///./src/pages/guide/check-state.vue?6656","webpack:///./src/pages/guide/check-state.vue?11a0","webpack:///src/pages/guide/check-state.vue","webpack:///./src/pages/guide/check-state.vue"],"names":["_node_modules_mini_css_extract_plugin_0_4_3_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_1_0_0_css_loader_index_js_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_check_state_vue_vue_type_style_index_0_id_40b23aa5_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","user","isDisabled","attrs","inputVal","phone","placeholder","maxLength","errorMsg","phoneError","on","update:inputVal","$event","$set","update:errorMsg","_v","_e","code","isGetCode","codeError","codeType","update:code","inputFocus","getCode","click","submit","_withStripped","guide_check_statevue_type_script_lang_js_","data","activity","viewCondition","status","isApplay","isOrder","[object Object]","components","com-input","com_input","com-verification-code","com_code","getActivity","userInfo","JSON","parse","sessionStorage","getItem","mobile","watch","methods","val","activity_manage","subScribe","activityId","$route","params","id","__errHandler","then","res","$router","replace","$messageBox","header","content","msg","confirmText","handleClick","e","action","verification","auth_manage","login","wechatAuth","setItem","stringify_default","getWebinarinfo","joinInfo","removeItem","isRequired","type","phoneReg","emailReg","integerReg","test","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"static/js/7.f43d51ee.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.4.3@mini-css-extract-plugin/dist/loader.js!../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./check-state.vue?vue&type=style&index=0&id=40b23aa5&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.4.3@mini-css-extract-plugin/dist/loader.js!../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./check-state.vue?vue&type=style&index=0&id=40b23aa5&lang=scss&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"v-checkState\" },\n    [\n      _vm.user.isDisabled\n        ? _c(\"com-input\", {\n            attrs: {\n              inputVal: _vm.user.phone,\n              placeholder: \"请输入手机号\",\n              maxLength: 11,\n              isDisabled: \"disabled\",\n              errorMsg: _vm.phoneError\n            },\n            on: {\n              \"update:inputVal\": function($event) {\n                _vm.$set(_vm.user, \"phone\", $event)\n              },\n              \"update:errorMsg\": function($event) {\n                _vm.phoneError = $event\n              }\n            }\n          })\n        : _c(\"com-input\", {\n            attrs: {\n              inputVal: _vm.user.phone,\n              placeholder: \"请输入手机号\",\n              maxLength: 11,\n              errorMsg: _vm.phoneError\n            },\n            on: {\n              \"update:inputVal\": function($event) {\n                _vm.$set(_vm.user, \"phone\", $event)\n              },\n              \"update:errorMsg\": function($event) {\n                _vm.phoneError = $event\n              }\n            }\n          }),\n      _vm._v(\" \"),\n      !_vm.user.isDisabled\n        ? _c(\"com-verification-code\", {\n            attrs: {\n              phone: _vm.user.phone,\n              inputVal: _vm.code,\n              code: _vm.code,\n              isGetCode: _vm.isGetCode,\n              placeholder: \"输入验证码\",\n              maxLength: 6,\n              errorMsg: _vm.codeError,\n              codeType: \"CONSUMER_USER_LOGIN\"\n            },\n            on: {\n              \"update:inputVal\": function($event) {\n                _vm.code = $event\n              },\n              \"update:code\": function($event) {\n                _vm.code = $event\n              },\n              inputFocus: function($event) {\n                _vm.getCode($event)\n              },\n              \"update:errorMsg\": function($event) {\n                _vm.codeError = $event\n              }\n            }\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\n        \"button\",\n        { staticClass: \"primary-button\", on: { click: _vm.submit } },\n        [_vm._v(\"提交\")]\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/_happypack@5.0.0@happypack/loader.js?id=happy-babel-js!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./check-state.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_happypack@5.0.0@happypack/loader.js?id=happy-babel-js!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./check-state.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"v-checkState\">\n    <com-input :inputVal.sync=\"user.phone\" placeholder='请输入手机号' :maxLength=\"11\" v-if=\"user.isDisabled\" isDisabled=\"disabled\" :errorMsg.sync=\"phoneError\"></com-input>\n    <com-input :inputVal.sync=\"user.phone\" placeholder='请输入手机号' :maxLength=\"11\" v-else :errorMsg.sync=\"phoneError\"></com-input>\n    <com-verification-code :phone='user.phone' :inputVal.sync=\"code\" v-if=\"!user.isDisabled\" :code.sync=\"code\" @inputFocus=\"getCode($event)\" :isGetCode=\"isGetCode\" placeholder='输入验证码' :maxLength=\"6\" :errorMsg.sync=\"codeError\" codeType=\"CONSUMER_USER_LOGIN\"></com-verification-code>\n    <button class=\"primary-button\" @click=\"submit\">提交</button>\n  </div>\n</template>\n<script>\n  import ComInput from '../../components/common/signup/com-input.vue'\n  import ComVerificationCode from '../../components/common/signup/com-code.vue'\n  import activityManage from '../../api/activity-manage.js'\n  import authManage from 'src/api/auth-manage'\n  export default {\n    data () {\n      return {\n        code: '',\n        isGetCode: true, // 控制验证码\n        activity: {\n          viewCondition: 'APPOINT', // 活动类型 APPOINT报名观看 NONE 无条件\n          status: '' // 当前活动状态\n        },\n        user: {\n          phone: '', // 无条件观看用户手机\n          isApplay: false, // 是否已经报名\n          isOrder: false, // 是否已经预约\n          isDisabled: false // 手机框是否可输入\n        },\n        codeError: '', // 验证码错误提示\n        phoneError: ''\n      }\n    },\n    mounted () {\n    },\n    components: {\n      'com-input': ComInput,\n      'com-verification-code': ComVerificationCode\n    },\n    created () {\n      this.getActivity()\n      let userInfo = JSON.parse(sessionStorage.getItem('login'))\n      if (userInfo) {\n        this.user.phone = userInfo.mobile\n        if (this.user.phone) {\n          this.user.isDisabled = true\n        }\n      }\n    },\n    watch: {\n    },\n    methods: {\n      getCode (val) {\n        this.code = val\n      },\n      subScribe () { // 预约活动\n        activityManage.subScribe({\n          activityId: this.$route.params.id,\n          __errHandler: true\n        }).then((res) => {\n          if (res.code === 200) {\n            this.$router.replace('/guid/' + this.$route.params.id)\n          } else {\n            this.$messageBox({\n              header: '提示',\n              content: res.msg,\n              confirmText: '确定',\n              handleClick: (e) => {\n                if (e.action === 'cancel') {\n                } else if (e.action === 'confirm') {\n                }\n              }\n            })\n          }\n        })\n      },\n      submit () { // 提交验证信息\n        if (!this.verification(this.user.phone, 'Y', 'mobile')) {\n          this.phoneError = '请正确填写手机号'\n          return false\n        }\n        if (!this.user.isDisabled) {\n          if (!this.verification(this.code, 'Y', 'integer')) {\n            this.codeError = '请输入正确验证码'\n            return false\n          }\n        }\n        if (this.user.isOrder || this.user.isDisabled) {\n          this.subScribe()\n        } else {\n          authManage.login({\n            mobile: this.user.phone,\n            code: this.code,\n            wechatAuth: sessionStorage.getItem('wechatAuth'),\n            __errHandler: true\n          }).then((res) => {\n            if (res.code === 200) {\n              if (res.data) {\n                sessionStorage.setItem('login', JSON.stringify(res.data))\n                activityManage.getWebinarinfo({\n                  activityId: this.$route.params.id,\n                  __errHandler: true\n                }).then((res) => {\n                  if (res.code === 200) {\n                    if (res.data.joinInfo.isOrder) {\n                      this.$router.replace('/guid/' + this.$route.params.id)\n                    } else {\n                      this.subScribe()\n                    }\n                  } else {\n                    this.$messageBox({\n                      header: '提示',\n                      content: res.msg,\n                      confirmText: '确定',\n                      handleClick: (e) => {\n                        if (e.action === 'cancel') {\n                        } else if (e.action === 'confirm') {\n                        }\n                      }\n                    })\n                  }\n                })\n              } else {\n                this.$messageBox({\n                  header: '提示',\n                  content: res.msg,\n                  confirmText: '确定',\n                  handleClick: (e) => {\n                    if (e.action === 'cancel') {\n                    } else if (e.action === 'confirm') {\n                    }\n                  }\n                })\n                sessionStorage.removeItem('login')\n                sessionStorage.removeItem('wechatAuth')\n              }\n            }\n          })\n        }\n      },\n      verification (val, isRequired, type) {\n        let phoneReg = /^1[3|4|5|6|7|8|9][0-9]\\d{8}$/\n        let emailReg = /^[A-Za-z\\d]+([-_.][A-Za-z\\d]+)*@([A-Za-z\\d]+[-.])+[A-Za-z\\d]{2,4}$/\n        let integerReg = /^[0-9]*$/\n\n        if (type === 'mobile') {\n          val = this.user.phone === '' ? val : this.user.phone\n        }\n        if (val === '') {\n          if (isRequired === 'Y') {\n            return false\n          }\n        } else {\n          switch (type) {\n            case 'mobile': val = this.user.phone === '' ? val : this.user.phone\n              return phoneReg.test(val)\n            case 'integer': return integerReg.test(val)\n            case 'email': return emailReg.test(val)\n          }\n        }\n        return true\n      },\n      getActivity () { // 获取活动信息\n        activityManage.getWebinarinfo({\n          activityId: this.$route.params.id,\n          __errHandler: true\n        }).then((res) => {\n          if (res.code === 200) {\n            this.activity.viewCondition = res.data.activity.viewCondition\n            this.activity.status = res.data.activity.status\n            this.user.isApplay = res.data.joinInfo.isApplay\n            this.user.isOrder = res.data.joinInfo.isOrder\n          }\n        })\n      }\n    }\n  }\n</script>\n<style lang=\"scss\" scoped>\n.v-checkState {\n}\n</style>\n\n","import { render, staticRenderFns } from \"./check-state.vue?vue&type=template&id=40b23aa5&scoped=true&\"\nimport script from \"./check-state.vue?vue&type=script&lang=js&\"\nexport * from \"./check-state.vue?vue&type=script&lang=js&\"\nimport style0 from \"./check-state.vue?vue&type=style&index=0&id=40b23aa5&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"40b23aa5\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/x.g/Documents/work/fe_interaction_h5/node_modules/_vue-hot-reload-api@2.3.1@vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('40b23aa5', component.options)\n    } else {\n      api.reload('40b23aa5', component.options)\n    }\n    module.hot.accept(\"./check-state.vue?vue&type=template&id=40b23aa5&scoped=true&\", function () {\n      api.rerender('40b23aa5', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/guide/check-state.vue\"\nexport default component.exports"],"sourceRoot":""}