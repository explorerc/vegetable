(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{192:function(t,i,a){},193:function(t,i,a){},237:function(t,i,a){"use strict";var n=a(192);a.n(n).a},239:function(t,i,a){"use strict";var n=a(193);a.n(n).a},292:function(t,i,a){"use strict";a.r(i);var n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"v-guid"},[a("p",{staticClass:"v-title"},[t._v("\n    "+t._s(t.activity.title)+"\n  ")]),t._v(" "),!t.activity.isCountdown||"NONE"===t.activity.viewCondition&&t.activity.countDown<1800||"Y"!==t.viewLimit.canAppoint?a("div",{staticClass:"v-summary"},[a("div",{domProps:{innerHTML:t._s(t.activity.description)}})]):t._e(),t._v(" "),t.activity.countDown>=1800?a("div",{staticClass:"v-operation"},["APPOINT"===t.activity.viewCondition?["Y"===t.viewLimit.canAppoint?[t.activity.isCountdown?a("com-countdown",{attrs:{time:t.activity.countDown}}):t._e(),t._v(" "),t.user.isApplay?[a("button",{staticClass:"primary-button"},[t._v("已报名")])]:[a("button",{staticClass:"primary-button",on:{click:function(i){t.jumpPage("/SignUp/")}}},[t._v("立即报名")]),t._v(" "),this.user.phone?t._e():a("a",{staticClass:"v-registered",attrs:{href:"javascript:;"},on:{click:function(i){t.jumpPage("/CheckState/")}}},[t._v("已报名")])]]:[t.user.isApplay?[a("button",{staticClass:"primary-button"},[t._v("已报名")])]:[this.user.phone?t._e():a("button",{staticClass:"primary-button",on:{click:function(i){t.jumpPage("/CheckState/")}}},[t._v("报名验证")])]]]:[t.activity.isCountdown?a("com-countdown",{attrs:{time:t.activity.countDown}}):t._e(),t._v(" "),t.user.isOrder?a("button",{staticClass:"primary-button"},[t._v("已预约")]):[a("button",{staticClass:"primary-button",on:{click:function(i){t.jumpPage("/SignUp/")}}},[t._v("预约")]),t._v(" "),this.user.phone?t._e():a("a",{staticClass:"v-registered",attrs:{href:"javascript:;"},on:{click:function(i){t.jumpPage("/CheckState/")}}},[t._v("已预约")])]]],2):a("div",{staticClass:"v-operation"},["APPOINT"===t.activity.viewCondition?["Y"===t.viewLimit.canAppoint?[t.activity.isCountdown?a("com-countdown",{attrs:{time:t.activity.countDown}}):t._e(),t._v(" "),t.user.isApplay?void 0:[a("button",{staticClass:"primary-button",on:{click:function(i){t.jumpPage("/SignUp/")}}},[t._v("立即报名")]),t._v(" "),this.user.phone?t._e():a("a",{staticClass:"v-registered",attrs:{href:"javascript:;"},on:{click:function(i){t.jumpPage("/CheckState/")}}},[t._v("已报名")])]]:[t.user.isApplay?void 0:[this.user.phone?t._e():a("button",{staticClass:"primary-button",on:{click:function(i){t.jumpPage("/CheckState/")}}},[t._v("报名验证")])]]]:[a("button",{staticClass:"primary-button",on:{click:function(i){t.jumpPage("/live/")}}},[t._v("进入直播")])]],2)])};n._withStripped=!0;var e=a(59),s=a.n(e),o=a(8),c=a.n(o),r=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"v-cundown"},[a("span",[t._v(t._s(t.showTime.day))]),t._v("天"),a("span",[t._v(t._s(t.showTime.hour))]),t._v("小时"),a("span",[t._v(t._s(t.showTime.minute))]),t._v("分"),a("span",[t._v(t._s(t.showTime.second))]),t._v("秒\n")])};r._withStripped=!0;var v={props:{time:Number},data:()=>({showTime:{day:0,hour:0,minute:0,second:0},timer:0}),mounted(){},components:{},created(){this.countDown(this.time)},watch:{},methods:{fomatDate(t){this.showTime.day=t/3600/24>>0,this.showTime.day<9&&(this.showTime.day="0"+this.showTime.day),this.showTime.hour=((t/3600%24>>0)+"").padStart(2,0),this.showTime.minute=((t/60%60>>0)+"").padStart(2,0),this.showTime.second=((t%60>>0)+"").padStart(2,0),1800===t&&(this.$emit("timeOut"),clearInterval(this.timer))},countDown(t){if(t>0){let i=setInterval(a=>{this.fomatDate(t--),t<0&&clearInterval(i)},1e3)}else this.fomatDate(0)}}},u=(a(237),a(1)),d=Object(u.a)(v,r,[],!1,null,"573d783f",null);d.options.__file="src/components/common/countdown/countdown.vue";var h=d.exports,p=a(183),l=a(219),m=a(45),w=a(2),y=a(184),_=a(182),f=a(58),C={mixins:[p.a],data:()=>({goUrl:"",goRegisteredUrl:"",activity:{viewCondition:"",title:"",description:"",isCountdown:!1,countDown:"",status:""},user:{phone:"",isApplay:!1,isOrder:!1},viewLimit:{finishTime:"",canAppoint:"Y"},vhallParams:{token:"",appId:"",channelId:"",accountId:""}}),mounted(){this.getInfo()},components:{"com-countdown":h},created(){},computed:Object(m.c)("tokenMager",{chatParams:t=>t.chatParams}),watch:{countDown:function(){console.log(this.activity.countDown)}},methods:c()({},Object(m.b)("tokenMager",{setChatParams:w.b}),{jumpPage(t){let i=t+this.$route.params.id;this.doAuth(i)},initSdk(){this.service=new l.a,this.service.init(this.vhallParams)},handleActivityStart(t){this.activity.countDown=1799},getInfo(){var t=this;return s()(function*(){let i=JSON.parse(sessionStorage.getItem("login"));i&&(t.user.phone=i.mobile),yield t.$config({handlers:!0}).$get(_.a.GET_LIVEINFO,{activityId:t.$route.params.id}).then(function(i){if(t.activity.viewCondition=i.data.activity.viewCondition,t.activity.status=i.data.activity.status,t.activity.title=i.data.activity.title,t.activity.countDown=i.data.activity.countDown,t.activity.description=i.data.activity.description,t.activity.isCountdown="COUNTDOWN"===i.data.guide.showType,t.user.isApplay=i.data.joinInfo.isApplay,t.user.isOrder=i.data.joinInfo.isOrder,i.data.viewLimit.canAppoint&&(t.viewLimit.canAppoint=i.data.viewLimit.canAppoint,t.viewLimit.finishTime=i.data.viewLimit.finishTime),t.activity.countDown<1800)"APPOINT"===t.activity.viewCondition?t.user.isApplay&&t.doAuth("/live/"+t.$route.params.id):t.user.isOrder&&"NONE"===t.activity.viewCondition&&t.doAuth("/live/"+t.$route.params.id);else{let i=t.activity.countDown,a=setInterval(function(n){--i<1800&&(t.activity.countDown=1799,clearInterval(a))},1e3)}"LIVING"===t.activity.status&&("APPOINT"===t.activity.viewCondition?t.user.isApplay&&t.doAuth("/live/"+t.$route.params.id):t.user.isOrder&&"NONE"===t.activity.viewCondition&&t.doAuth("/live/"+t.$route.params.id))}).catch(function(i){t.$messageBox({header:"提示",content:i.msg,confirmText:"确定",handleClick:function(t){"cancel"===t.action||t.action}})}),t.getToken()})()},getToken(){("APPOINT"===this.activity.viewCondition&&this.user.isApplay||"APPOINT"!==this.activity.viewCondition)&&(this.chatParams.token?(this.vhallParams=this.chatParams,this.$nextTick(()=>{this.initSdk(),this.service.regHandler(y.a.BEGIN_LIVE,this.handleActivityStart)})):this.$config({handlers:!0}).$get(f.a.GET_USERREGACTIVITY,{activityId:this.$route.params.id}).then(t=>{this.$config({handlers:!0}).$get(_.a.GET_SDKTOKEN,{activityId:this.$route.params.id,activityUserId:t.data.activityUserId}).then(t=>{this.vhallParams.token=t.data.token,this.vhallParams.appId=t.data.appId,this.vhallParams.channelId=t.data.channelRoom,this.vhallParams.accountId=t.data.accountId,this.setChatParams(this.vhallParams),this.$nextTick(()=>{this.initSdk(),this.service.regHandler(y.a.BEGIN_LIVE,this.handleActivityStart)})})}))}})},g=(a(239),Object(u.a)(C,n,[],!1,null,"28ebadab",null));g.options.__file="src/pages/guide/index.vue";i.default=g.exports}}]);
//# sourceMappingURL=5.9707f805.js.map